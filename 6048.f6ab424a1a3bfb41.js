"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[6048],{8332:(D,C,o)=>{o.d(C,{O:()=>l});var f=o(4496),e=o(592),u=o(7592);let l=(()=>{class _{constructor(){this.http=(0,f.uUt)(e.k)}getMenuList(m){return this.http.post(u.sh,m)}getMenuListParams(m){return this.http.post(u.uo,m)}addMenus(m){return this.http.post(u.Al,m,{needSuccessInfo:!0})}editMenus(m){return this.http.put(u.yU,m,{needSuccessInfo:!0})}delMenus(m){return this.http.post(u.cr,{ids:[m]},{needSuccessInfo:!0})}getMenuDetail(m){return this.http.post(u.Yt,{menuId:m},{needSuccessInfo:!0})}getMenuDetailFromUrl(m){return this.http.post(u.y4,{url:m},{needSuccessInfo:!0})}static#e=this.\u0275fac=function(R){return new(R||_)};static#t=this.\u0275prov=f.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},6048:(D,C,o)=>{o.r(C),o.d(C,{default:()=>Ee});var f=o(472),e=o(4496),u=o(4872),l=o(6504),_=o(9072),F=o(8824),m=o(5224),R=o(3652),g=o(1368),d=o(2605);let N=(()=>{class n{regexString(t){return`^(\\d${t?`{0,${t}}`:"+"}(\\.\\d{0,2})?|\\.\\d{0,2})$`}setRegex(t){this.digitRegex=new RegExp(this.regexString(t),"g")}set maxDigits(t){this.setRegex(t)}constructor(){this.elementRef=(0,e.uUt)(e.GMv),this.decimalPipe=(0,e.uUt)(g.hl),this.lastValid="",this.el=this.elementRef.nativeElement,this.setRegex()}ngOnInit(){this.el.value=this.decimalPipe.transform(this.el.value,"1.0-0")}onFocus(t){this.el.value=t.replace(/[^0-9.]+/g,""),this.el.select()}onBlur(t){this.el.value=this.decimalPipe.transform(t,"1.0-0")}onUndo(t){this.el.value=""}onInput(t){const a=(t.target.value.match(this.digitRegex)||[]).join("");(a||!t.target.value)&&(this.lastValid=a),this.el.value=a||this.lastValid}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275dir=e.Sc5({type:n,selectors:[["","appInputNumber",""]],hostBindings:function(a,i){1&a&&e.qCj("focus",function(s){return i.onFocus(s.target.value)})("blur",function(s){return i.onBlur(s.target.value)})("keydown.control.z",function(s){return i.onUndo(s.target.value)})("input",function(s){return i.onInput(s)})},inputs:{maxDigits:"maxDigits"},standalone:!0})}return n})();class Y{}let U=(()=>{class n{constructor(){this.cdr=(0,e.uUt)(e.kD9),this.decimalPipe=(0,e.uUt)(g.hl),this.changeNumber=new e._w7}set Number(t){this._number=this.decimalPipe.transform(t,"1.0-0")}get Number(){return this.inputChangeDectction(),this._number}inputChangeDectction(){this.cdr.markForCheck()}onQueryParamsChange(t){this.changeNumber.emit(t.target.value.replace(/[^0-9.]+/g,""))}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-input-number"]],inputs:{Number:"Number"},outputs:{changeNumber:"changeNumber"},standalone:!0,features:[e.M5G([{provide:Y,useExisting:n}]),e.UHJ],decls:1,vars:1,consts:[["nz-input","","type","text","autocomplete","off","appInputNumber","","maxDigits","9",1,"form-control",3,"ngModel","ngModelChange","blur"]],template:function(a,i){1&a&&(e.I0R(0,"input",0),e.iHE("ngModelChange",function(s){return e.kNx(i._number,s)||(i._number=s),s}),e.qCj("blur",function(s){return i.onQueryParamsChange(s)}),e.C$Y()),2&a&&e.OKB("ngModel",i._number)},dependencies:[d.OA,d.cv,l.y,l.ot,l.ue,l._G,N],changeDetection:0})}return n})();var $=o(2624),M=o(5072),P=o(872),L=o(7340),v=o(2700),Q=o(788),p=o(1752),h=o(2532),T=o(9116);let H=(()=>{class n{constructor(t){this.modalRef=t,this.nzModalData=(0,e.uUt)(T.aG),this.fb=(0,e.uUt)(l.im),this.params={}}initForm(){this.addEditForm=this.fb.group({rolename:[null,[l.AQ.required]],mota:[null]})}getAsyncFnData(t){return(0,v.of)(t)}getCurrentValue(){return(0,Q.qg)(this.addEditForm)?(0,v.of)(this.addEditForm.value):(0,v.of)(!1)}ngOnInit(){this.initForm(),this.nzModalData&&this.addEditForm.patchValue(this.nzModalData)}static#e=this.\u0275fac=function(a){return new(a||n)(e.GI1(T.U7))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-role-manage-modal"]],standalone:!0,features:[e.UHJ],decls:11,vars:9,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","rolename",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp t\xean nh\xe2n v\u1eadt",3,"nzSm","nzXs"],["nz-input","","formControlName","rolename","name","rolename","placeholder","Vui l\xf2ng nh\u1eadp t\xean vai tr\xf2","id","rolename"],["nzFor","mota",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","mota","name","mota","placeholder","Vui l\xf2ng nh\u1eadp m\xf4 t\u1ea3","id","mota"]],template:function(a,i){1&a&&(e.I0R(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),e.OEk(3,"T\xean vai tr\xf2"),e.C$Y(),e.I0R(4,"nz-form-control",2),e.wR5(5,"input",3),e.C$Y()(),e.I0R(6,"nz-form-item")(7,"nz-form-label",4),e.OEk(8,"M\xf4 t\u1ea3"),e.C$Y(),e.I0R(9,"nz-form-control",5),e.wR5(10,"input",6),e.C$Y()()()),2&a&&(e.E7m("formGroup",i.addEditForm),e.yG2(2),e.E7m("nzSm",4)("nzXs",24),e.yG2(2),e.E7m("nzSm",18)("nzXs",24),e.yG2(3),e.E7m("nzSm",4)("nzXs",24),e.yG2(2),e.E7m("nzSm",18)("nzXs",24))},dependencies:[l.y,l.sz,l.ot,l.ue,l.u,p.WO,h.QD,h.ox,p.BN,p.qU,p.Qo,p.YZ,l.sl,l.uW,l.Wo,h.Ko,d.OA,d.cv],encapsulation:2,changeDetection:0})}return n})(),B=(()=>{class n{constructor(){this.modalWrapService=(0,e.uUt)(L.K)}getContentComponent(){return H}show(t={},a){return this.modalWrapService.show(this.getContentComponent(),t,a)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=e.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var y=o(460),z=o(5128),b=o(5584),E=o(6088),O=o(9432),X=o(8488),S=o(3064);const K=["operationTpl"];function J(n,c){if(1&n){const t=e.KQA();e.SAx(0),e.I0R(1,"app-input-currency",19),e.qCj("changeAmount",function(i){e.usT(t);const r=e.GaO();return e.CGJ(r.changeAmount(i))}),e.C$Y(),e.k70()}if(2&n){const t=e.GaO();e.yG2(),e.E7m("Amount",t.amountMode)}}function j(n,c){if(1&n){const t=e.KQA();e.I0R(0,"app-input-number",20),e.qCj("changeNumber",function(i){e.usT(t);const r=e.GaO();return e.CGJ(r.changeNumber(i))}),e.C$Y()}if(2&n){const t=e.GaO();e.E7m("Number",t.numberMode)}}function w(n,c){if(1&n){const t=e.KQA();e.I0R(0,"span",22),e.qCj("click",function(){e.usT(t);const i=e.GaO().id,r=e.GaO();return e.CGJ(r.setRole(i))}),e.OEk(1,"\u0110\u1eb7c quy\u1ec1n"),e.C$Y()}}function V(n,c){if(1&n){const t=e.KQA();e.I0R(0,"span",22),e.qCj("click",function(){e.usT(t);const i=e.GaO().id,r=e.GaO();return e.CGJ(r.edit(i))}),e.OEk(1,"C\u1eadp nh\u1eadt"),e.C$Y()}}function W(n,c){if(1&n){const t=e.KQA();e.I0R(0,"span",22),e.qCj("click",function(){e.usT(t);const i=e.GaO().id,r=e.GaO();return e.CGJ(r.del(i))}),e.OEk(1,"X\xf3a"),e.C$Y()}}function Z(n,c){if(1&n&&e.yuY(0,w,2,0,"span",21)(1,V,2,0,"span",21)(2,W,2,0,"span",21),2&n){const t=e.GaO();e.E7m("appAuth",t.ActionCode.RoleManagerSetRole),e.yG2(),e.E7m("appAuth",t.ActionCode.RoleManagerEdit),e.yG2(),e.E7m("appAuth",t.ActionCode.RoleManagerDel)}}function q(n,c){if(1&n){const t=e.KQA();e.I0R(0,"button",24),e.qCj("click",function(){e.usT(t);const i=e.GaO(2);return e.CGJ(i.add())}),e.wR5(1,"i",25),e.OEk(2," Th\xeam m\u1edbi "),e.C$Y()}}function ee(n,c){if(1&n&&e.yuY(0,q,3,0,"button",23),2&n){const t=e.GaO();e.E7m("appAuth",t.ActionCode.RoleManagerAdd)}}const te=()=>({"padding-bottom":0}),ne=()=>({xs:8,sm:16,md:24});let ie=(()=>{class n{constructor(){this.dataService=(0,e.uUt)(m.q),this.modalSrv=(0,e.uUt)(T.mU),this.cdr=(0,e.uUt)(e.kD9),this.modalService=(0,e.uUt)(B),this.router=(0,e.uUt)(_.E5),this.message=(0,e.uUt)(O.yo),this.searchParam={},this.pageHeaderInfo={title:"Qu\u1ea3n l\xfd vai tr\xf2",breadcrumb:["Home","Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng","Qu\u1ea3n l\xfd vai tr\xf2"]},this.dataList=[],this.checkedCashArray=[],this.ActionCode=f.i,this.destroyRef=(0,e.uUt)(e.eM9),this.flg=!1,this.numberMode=1e3,this.amountMode=1e3}changeNumber(t){this.numberMode=t}changeAmount(t){this.amountMode=t}selectedChecked(t){this.checkedCashArray=[...t]}resetForm(){this.searchParam={},this.getDataList()}getDataList(t){this.tableConfig.loading=!0,this.dataService.getRoles({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,F.U)(()=>{this.tableLoading(!1)}),(0,u.ay)(this.destroyRef)).subscribe(i=>{const{list:r,total:s,pageNum:Re}=i;this.dataList=[...r],this.tableConfig.total=s,this.tableConfig.pageIndex=Re,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}setRole(t){this.router.navigate(["/default/system/role-manager/set-role"],{queryParams:{id:t}})}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}add(){this.modalService.show({nzTitle:"Th\xeam m\u1edbi"}).pipe((0,u.ay)(this.destroyRef)).subscribe(t=>{if(!t||0===t.status)return;const a={...t.modalValue};this.tableLoading(!0),this.addEditData(a,"addRoles")},t=>this.tableLoading(!1))}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}edit(t){this.dataService.getRolesDetail(t).pipe((0,u.ay)(this.destroyRef)).subscribe(a=>{this.modalService.show({nzTitle:"C\u1eadp nh\u1eadt"},a).pipe((0,u.ay)(this.destroyRef)).subscribe(({modalValue:i,status:r})=>{0!==r&&(i.id=t,this.tableLoading(!0),this.addEditData(i,"editRoles"))},i=>this.tableLoading(!1))})}addEditData(t,a){this.dataService[a](t).pipe((0,u.ay)(this.destroyRef)).subscribe(()=>{this.getDataList()})}del(t){const a=[t];this.modalSrv.confirm({nzTitle:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng\uff1f",nzContent:"Kh\xf4ng kh\xf4i ph\u1ee5c \u0111\u01b0\u1ee3c khi d\u1eef li\u1ec7u b\u1ecb x\xf3a !",nzOnOk:()=>{this.tableLoading(!0),this.dataService.delRoles(a).pipe((0,u.ay)(this.destroyRef)).subscribe(()=>{1===this.dataList.length&&this.tableConfig.pageIndex--,this.getDataList()},i=>this.tableLoading(!1))}})}changePageSize(t){this.tableConfig.pageSize=t}ngOnInit(){this.initTable()}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"T\xean vai tr\xf2",field:"rolename",width:100},{title:"M\xf4 t\u1ea3",width:400,field:"mota"},{title:"V\u1eadn h\xe0nh",tdTemplate:this.operationTpl,width:280,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-role-manage"]],viewQuery:function(a,i){if(1&a&&e.CC$(K,7),2&a){let r;e.wto(r=e.Gqi())&&(i.operationTpl=r.first)}},standalone:!0,features:[e.M5G([g.hl,g.cf]),e.UHJ],decls:32,vars:31,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],[3,"nzFor"],["name","rolename","nz-input","","placeholder","Vui l\xf2ng nh\u1eadp t\xean vai tr\xf2",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["numberTpl",""],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[3,"btnTpl","tableTitle","reload"],[3,"tableConfig","tableData","changePageNum","changePageSize"],["operationTpl",""],["tableBtns",""],[3,"Amount","changeAmount"],[3,"Number","changeNumber"],["class","operate-text",3,"click",4,"appAuth"],[1,"operate-text",3,"click"],["class","m-r-8","nz-button","","nzType","primary",3,"click",4,"appAuth"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"]],template:function(a,i){if(1&a&&(e.wR5(0,"app-page-header",0),e.I0R(1,"div",1)(2,"nz-card",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"nz-form-item")(7,"nz-form-label",6),e.OEk(8,"T\xean vai tr\xf2"),e.C$Y(),e.I0R(9,"nz-form-control")(10,"input",7),e.iHE("ngModelChange",function(s){return e.kNx(i.searchParam.rolename,s)||(i.searchParam.rolename=s),s}),e.C$Y()()()(),e.I0R(11,"div",5)(12,"nz-form-item")(13,"nz-form-label",6),e.OEk(14,"Input Number"),e.C$Y(),e.I0R(15,"nz-form-control"),e.yuY(16,J,2,1,"ng-container",8)(17,j,1,1,"ng-template",null,9,e.gJz),e.C$Y()()(),e.I0R(19,"div",10)(20,"button",11),e.qCj("click",function(){return i.getDataList()}),e.wR5(21,"i",12),e.OEk(22," T\xecm ki\u1ebfm "),e.C$Y(),e.I0R(23,"button",13),e.qCj("click",function(){return i.resetForm()}),e.wR5(24,"i",14),e.OEk(25," C\xe0i l\u1ea1i "),e.C$Y()()()()(),e.I0R(26,"app-card-table-wrap",15),e.qCj("reload",function(){return i.reloadTable()}),e.I0R(27,"app-ant-table",16),e.qCj("changePageNum",function(s){return i.getDataList(s)})("changePageSize",function(s){return i.changePageSize(s)}),e.C$Y(),e.yuY(28,Z,3,3,"ng-template",null,17,e.gJz),e.C$Y()(),e.yuY(30,ee,1,1,"ng-template",null,18,e.gJz)),2&a){const r=e.Gew(18),s=e.Gew(31);e.E7m("pageHeaderInfo",i.pageHeaderInfo),e.yG2(2),e.E7m("nzBodyStyle",e.q4q(29,te)),e.yG2(2),e.E7m("nzGutter",e.q4q(30,ne)),e.yG2(),e.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.yG2(5),e.OKB("ngModel",i.searchParam.rolename),e.yG2(),e.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.yG2(5),e.E7m("ngIf",1==i.flg)("ngIfElse",r),e.yG2(3),e.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.yG2(),e.E7m("nzType","primary"),e.yG2(6),e.E7m("btnTpl",s)("tableTitle","Danh s\xe1ch vai tr\xf2"),e.yG2(),e.E7m("tableConfig",i.tableConfig)("tableData",i.dataList)}},dependencies:[M.Q,z.iq,z.Q9,l.y,l.sz,l.ot,l.ue,l.u,l._G,l.SC,p.WO,h.QD,h.ox,p.BN,p.qU,p.Qo,p.YZ,h.Ko,d.OA,d.cv,y.EV,y.Ez,S.k,b.o9,b.gn,E.Wy,E.If,$.E,R.Q,P.s,U,X.S,g.u_],encapsulation:2,changeDetection:0})}return n})();var ae=o(6020),oe=o(4504),re=o(8332),se=o(7823),I=o(4984),G=o(9640),k=o(280),A=o(8288);function le(n,c){1&n&&e.OEk(0,"Quay l\u1ea1i")}function ce(n,c){if(1&n){const t=e.KQA();e.I0R(0,"span",13),e.qCj("click",function(){e.usT(t);const i=e.GaO().$implicit;return e.CGJ(i.isOpen=!i.isOpen)}),e.wR5(1,"i",14),e.I0R(2,"span",15),e.OEk(3),e.C$Y()()}if(2&n){const t=e.GaO().$implicit;e.yG2(),e.E7m("nzType",t.isOpen?"down":"right"),e.yG2(2),e.cNF(t.isOpen?"\u1ea8n":"M\u1edf r\u1ed9ng")}}function ue(n,c){1&n&&e.C_f(0)}function me(n,c){if(1&n){const t=e.KQA();e.I0R(0,"span",13),e.qCj("click",function(){e.usT(t);const i=e.GaO(2).$implicit;return e.CGJ(i.isOpen=!i.isOpen)}),e.wR5(1,"i",14),e.I0R(2,"span",15),e.OEk(3),e.C$Y()()}if(2&n){const t=e.GaO(2).$implicit;e.yG2(),e.E7m("nzType",t.isOpen?"down":"right"),e.yG2(2),e.cNF(t.isOpen?"\u1ea8n":"M\u1ee1 r\u1ed9ng")}}const pe=n=>({paddingLeft:n});function ge(n,c){if(1&n){const t=e.KQA();e.SAx(0),e.I0R(1,"div",19)(2,"label",7),e.iHE("ngModelChange",function(i){e.usT(t);const r=e.GaO().$implicit;return e.kNx(r.checked,i)||(r.checked=i),e.CGJ(i)}),e.OEk(3),e.C$Y(),e.yuY(4,me,4,2,"span",8),e.C$Y(),e.k70()}if(2&n){const t=e.GaO().$implicit;e.yG2(),e.E7m("ngStyle",e.S45(4,pe,16*t.level+"px")),e.yG2(),e.OKB("ngModel",t.checked),e.yG2(),e.cNF(t.menuName),e.yG2(),e.E7m("ngIf",t.children&&t.children.length>0)}}function _e(n,c){if(1&n){const t=e.KQA();e.I0R(0,"label",7),e.iHE("ngModelChange",function(i){const s=e.usT(t).$implicit;return e.kNx(s.checked,i)||(s.checked=i),e.CGJ(i)}),e.OEk(1),e.C$Y()}if(2&n){const t=c.$implicit;e.OKB("ngModel",t.checked),e.yG2(),e.cNF(t.menuName)}}function de(n,c){if(1&n&&(e.SAx(0),e.I0R(1,"div",20)(2,"span"),e.OEk(3,"Quy\u1ec1n ho\u1ea1t \u0111\u1ed9ng\uff1a"),e.C$Y(),e.yuY(4,_e,2,2,"label",21),e.wR5(5,"nz-divider",9),e.C$Y(),e.k70()),2&n){const t=e.GaO(4).$implicit;e.yG2(4),e.E7m("ngForOf",t)}}function he(n,c){if(1&n&&e.yuY(0,de,6,1,"ng-container",16),2&n){const t=e.GaO().first;e.E7m("ngIf",t)}}function fe(n,c){1&n&&e.C_f(0)}const x=(n,c)=>({$implicit:n,isOpen:c});function Ce(n,c){if(1&n&&(e.SAx(0),e.yuY(1,ge,5,6,"ng-container",17)(2,he,1,1,"ng-template",null,18,e.gJz)(4,fe,1,0,"ng-container",11),e.k70()),2&n){const t=c.$implicit,a=e.Gew(3);e.GaO(3);const i=e.Gew(9);e.yG2(),e.E7m("ngIf","C"===t.menuType)("ngIfElse",a),e.yG2(3),e.E7m("ngTemplateOutlet",i)("ngTemplateOutletContext",e.IBC(4,x,t.children,t.isOpen))}}function ye(n,c){if(1&n&&(e.SAx(0),e.yuY(1,Ce,5,7,"ng-container",3),e.k70()),2&n){const t=e.GaO().$implicit;e.yG2(),e.E7m("ngForOf",t)}}function ze(n,c){1&n&&e.yuY(0,ye,2,1,"ng-container",16),2&n&&e.E7m("ngIf",c.isOpen)}function be(n,c){if(1&n){const t=e.KQA();e.I0R(0,"li")(1,"div",6)(2,"label",7),e.iHE("ngModelChange",function(i){const s=e.usT(t).$implicit;return e.kNx(s.checked,i)||(s.checked=i),e.CGJ(i)}),e.OEk(3),e.C$Y(),e.yuY(4,ce,4,2,"span",8),e.C$Y(),e.wR5(5,"nz-divider",9),e.I0R(6,"div",10),e.yuY(7,ue,1,0,"ng-container",11),e.C$Y(),e.yuY(8,ze,1,1,"ng-template",null,12,e.gJz),e.C$Y()}if(2&n){const t=c.$implicit,a=e.Gew(9);e.yG2(2),e.OKB("ngModel",t.checked),e.yG2(),e.cNF(t.menuName),e.yG2(),e.E7m("ngIf",t.children&&t.children.length>0),e.yG2(3),e.E7m("ngTemplateOutlet",a)("ngTemplateOutletContext",e.IBC(5,x,t.children,t.isOpen))}}const Ee=[{path:"",component:ie,data:{title:"Qu\u1ea3n l\xfd vai tr\xf2",key:"role-manage"}},{path:"set-role",component:(()=>{class n{constructor(){this.dataService=(0,e.uUt)(m.q),this.cdr=(0,e.uUt)(e.kD9),this.menusService=(0,e.uUt)(re.O),this.router=(0,e.uUt)(_.E5),this.message=(0,e.uUt)(O.yo),this.userService=(0,e.uUt)(oe.u),this.pageHeaderInfo={title:"Thi\u1ebft l\u1eadp quy\u1ec1n",desc:"Vai tr\xf2 hi\u1ec7n t\u1ea1i\uff1a",breadcrumb:["Home","Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng","Qu\u1ea3n l\xfd vai tr\xf2","Thi\u1ebft l\u1eadp quy\u1ec1n"]},this.authCodeArr=[],this.permissionList=[],this.destroyRef=(0,e.uUt)(e.eM9)}initPermission(){this.dataService.getPermissionById(this.id).pipe((0,ae.m)(t=>(this.authCodeArr=t,this.menusService.getMenuList({pageNum:0,pageSize:0}))),(0,u.ay)(this.destroyRef)).subscribe(t=>{const a=t.list;a.forEach(i=>{i.isOpen=!1,i.checked=this.authCodeArr.includes(i.code)}),this.permissionList=(0,I.oZ)((0,I.ot)(a)),this.cdr.markForCheck()})}getRoleName(){this.userId>0&&this.dataService.getRolesDetail(this.userId).pipe((0,u.ay)(this.destroyRef)).subscribe(({rolename:t})=>{this.pageHeaderInfo={...this.pageHeaderInfo,desc:`Vai tr\xf2 hi\u1ec7n t\u1ea1i: ${t}`},this.cdr.markForCheck()})}back(){this.router.navigateByUrl("/default/system/role-manager")}submit(){const t=[...this.permissionList],a=(0,I.q0)(t),i=[];a.forEach(s=>{s.checked&&i.push(`${s.id}`)}),this.dataService.updatePermission({permissionIds:i,roleId:this.id}).pipe((0,u.ay)(this.destroyRef)).subscribe(()=>{this.message.success("C\xe0i \u0111\u1eb7t th\xe0nh c\xf4ng, v\xe0 n\xf3 s\u1ebd c\xf3 hi\u1ec7u l\u1ef1c sau khi \u0111\u0103ng nh\u1eadp l\u1ea1i")})}_onReuseInit(){this.ngOnInit()}ngOnInit(){this.userService.getUserInfo().subscribe(t=>{this.userId=t.userId}),this.getRoleName(),this.initPermission()}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-set-role"]],inputs:{id:"id"},standalone:!0,features:[e.UHJ],decls:12,vars:4,consts:[[3,"backTpl","backUrl","pageHeaderInfo"],["backTpl",""],[1,"normal-table-wrap"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",1,"right",3,"click"],["nz-button","","nzGhost","","nzType","primary",1,"right","m-l-20",3,"click"],[1,"first-menu"],["nz-checkbox","",3,"ngModel","ngModelChange"],["class","hand-model",3,"click",4,"ngIf"],[1,"m-0"],["nz-result-content","",1,"m-0","p-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["permissionTpl",""],[1,"hand-model",3,"click"],["nz-icon","","nzTheme","outline",3,"nzType"],[1,"operate-text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["operateTpl",""],[1,"first-menu",3,"ngStyle"],[1,"operate-line","li-height","m-0","p-0","p-l-35"],["nz-checkbox","",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"]],template:function(a,i){if(1&a&&(e.wR5(0,"app-page-header",0),e.yuY(1,le,1,0,"ng-template",null,1,e.gJz),e.I0R(3,"div",2)(4,"nz-card")(5,"ul"),e.yuY(6,be,10,8,"li",3),e.C$Y()()(),e.I0R(7,"app-footer-submit")(8,"button",4),e.qCj("click",function(){return i.submit()}),e.OEk(9,"Thi\u1ebft l\u1eadp"),e.C$Y(),e.I0R(10,"button",5),e.qCj("click",function(){return i.back()}),e.OEk(11,"Quay l\u1ea1i"),e.C$Y()()),2&a){const r=e.Gew(2);e.E7m("backTpl",r)("backUrl","/default/system/role-manager")("pageHeaderInfo",i.pageHeaderInfo),e.yG2(6),e.E7m("ngForOf",i.permissionList)}},dependencies:[M.Q,z.iq,z.Q9,g.Iw,G.UN,G.Ep,l.y,l.ue,l._G,g.u_,E.Wy,E.If,y.EV,y.Ez,S.k,b.o9,k.o,k.M,A.k3,A.oZ,g.XV,g.Qt,se.k,b.gn],styles:[".li-height{height:40px;line-height:40px}.first-menu{display:flex;align-items:center;justify-content:space-between;height:40px;line-height:40px}.ant-card-body{display:block!important}\n"],encapsulation:2,changeDetection:0})}return n})(),data:{title:"Qu\u1ea3n l\xfd vai tr\xf2",key:"set-role",authCode:f.i.RoleManagerSetRole}}]}}]);