"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[156],{156:(et,z,a)=>{a.r(z),a.d(z,{DemoComponent:()=>tt});var t=a(4496),T=a(9072),y=a(8068),D=a(8332),S=a(9276),A=a(6844),I=a(3652),G=a(2624),F=a(5072),P=a(948),d=a(460),v=a(9432),O=a(4128),U=a(6700);const b="DemoListProduct";var p=a(9116);let x=(()=>{class o{constructor(){this.socketService=(0,t.uUt)(O.a),this.moalSrv=(0,t.uUt)(p.mU),this.spinService=(0,t.uUt)(S._),this.productsStore$=new U.g({pageNum:1,pageSize:10,total:0,list:[]}),this.socketService.setupSocketConnection(),this.socketService.on(b,e=>{e.code>0?this.moalSrv.error({nzTitle:"Th\xf4ng b\xe1o l\u1ed7i",nzContent:e.msg}):this.setProductStore(e.data)})}sendList(e){this.spinService.setCurrentGlobalSpinStore(!0),this.socketService.emit(b,e)}add(e){this.spinService.setCurrentGlobalSpinStore(!0),this.socketService.emit("DemoCreateProduct",e)}edit(e){this.spinService.setCurrentGlobalSpinStore(!0),this.socketService.emit("DemoUpdateProduct",e)}del(e){this.spinService.setCurrentGlobalSpinStore(!0),this.socketService.emit("DemoDeleteProduct",e)}setProductStore(e){this.productsStore$.next(e),this.spinService.setCurrentGlobalSpinStore(!1)}getProductStore(){return this.productsStore$.asObservable()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275prov=t.wxM({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Y=a(8824),_=a(7340),L=a(1368),c=a(6504),N=a(688),X=a(788),m=a(1752),u=a(2532),E=a(2605),h=a(2700);function Q(o,g){1&o&&(t.SAx(0),t.I0R(1,"nz-form-item")(2,"nz-form-label",8),t.OEk(3,"ID Product"),t.C$Y(),t.I0R(4,"nz-form-control",9),t.wR5(5,"input",10),t.C$Y()(),t.k70()),2&o&&(t.yG2(2),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24))}let B=(()=>{class o{constructor(e){this.modalRef=e,this.isEdit=(0,t.OCB)(!1),this.fb=(0,t.uUt)(c.im),this.vf=(0,t.uUt)(N.u),this.message=(0,t.uUt)(v.yo)}getAsyncFnData(e){return(0,h.of)(e)}getCurrentValue(){return(0,X.qg)(this.addEditForm)?(0,h.of)(this.addEditForm.value):(0,h.of)(!1)}get f(){return this.addEditForm.controls}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&(this.isEdit.set(!0),this.addEditForm.patchValue(this.params))}initForm(){this.addEditForm=this.fb.group({idpro:[null,[c.AQ.required]],proname:[null,[c.AQ.required]],price:[null]})}static#t=this.\u0275fac=function(i){return new(i||o)(t.GI1(p.U7))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-subdemo"]],standalone:!0,features:[t.UHJ],decls:12,vars:10,consts:[["nz-form","",3,"formGroup"],[4,"ngIf"],["nzRequired","","nzFor","proname",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp T\xean S\u1ea3n Ph\u1ea9m",3,"nzSm","nzXs"],["nz-input","","formControlName","proname","name","proname","placeholder","vd: iphone","id","proname"],["nzFor","price",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp gi\xe1",3,"nzSm","nzXs"],["nz-input","","formControlName","price","name","price","placeholder","Vui l\xf2ng nh\u1eadp ...","id","price"],["nzRequired","","nzFor","idpro",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ID Product",3,"nzSm","nzXs"],["nz-input","","formControlName","idpro","name","idpro","placeholder","Vui l\xf2ng nh\u1eadp ID Product","id","idpro"]],template:function(i,n){1&i&&(t.I0R(0,"form",0),t.yuY(1,Q,6,4,"ng-container",1),t.I0R(2,"nz-form-item")(3,"nz-form-label",2),t.OEk(4,"T\xean S\u1ea3n Ph\u1ea9m"),t.C$Y(),t.I0R(5,"nz-form-control",3),t.wR5(6,"input",4),t.C$Y()(),t.I0R(7,"nz-form-item")(8,"nz-form-label",5),t.OEk(9,"Gi\xe1"),t.C$Y(),t.I0R(10,"nz-form-control",6),t.wR5(11,"input",7),t.C$Y()()()),2&i&&(t.E7m("formGroup",n.addEditForm),t.yG2(),t.E7m("ngIf",!n.isEdit()),t.yG2(2),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24),t.yG2(3),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24))},dependencies:[c.y,c.sz,c.ot,c.ue,c.u,m.WO,u.QD,u.ox,m.BN,m.qU,m.Qo,m.YZ,c.sl,c.uW,c.Wo,u.Ko,E.OA,E.cv,L.u_,d.EV],changeDetection:0})}return o})(),J=(()=>{class o{constructor(){this.modalWrapService=(0,t.uUt)(_.K)}getContentComponent(){return B}show(e={},i){return this.modalWrapService.show(this.getContentComponent(),e,i)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275prov=t.wxM({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var V=a(3064),j=a(5584);const w=["oprationTpl"],H=["idproTpl"],K=["pronameTpl"],W=["priceTpl"];function M(o,g){if(1&o){const e=t.KQA();t.I0R(0,"button",7),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.showVideo())}),t.wR5(1,"span",8),t.OEk(2,"H\u01b0\u1edbng d\u1eabn "),t.C$Y()}2&o&&t.E7m("nzSize","large")}function Z(o,g){if(1&o){const e=t.KQA();t.I0R(0,"span",9)(1,"button",10),t.qCj("click",function(){const n=t.usT(e),r=n.id,s=n.idpro,l=n.proname,C=n.price,f=t.GaO();return t.CGJ(f.edit(r,s,l,C))}),t.OEk(2,"C\u1eadp nh\u1eadt"),t.C$Y()(),t.I0R(3,"span",9)(4,"button",10),t.qCj("click",function(){const r=t.usT(e).id,s=t.GaO();return t.CGJ(s.del(r))}),t.OEk(5,"X\xf3a"),t.C$Y()()}}function q(o,g){if(1&o){const e=t.KQA();t.I0R(0,"button",11),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.add())}),t.wR5(1,"i",12),t.OEk(2," Th\xeam m\u1edbi"),t.C$Y(),t.I0R(3,"button",11),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.delAll())}),t.wR5(4,"i",13),t.OEk(5," X\xf3a t\u1ea5t c\u1ea3"),t.C$Y()}}let tt=(()=>{class o extends A.G{constructor(){super(...arguments),this.cdr=(0,t.uUt)(t.kD9),this.spinService=(0,t.uUt)(S._),this.dataService=(0,t.uUt)(y.y),this.youtubeModalService=(0,t.uUt)(P.M),this.router=(0,t.uUt)(T.E5),this.menusService=(0,t.uUt)(D.O),this.message=(0,t.uUt)(v.yo),this.demoStoreService=(0,t.uUt)(x),this.subdemoService=(0,t.uUt)(J),this.modalSrv=(0,t.uUt)(p.mU),this.dataList=[],this.checkedCashArray=[],this.visibleOptions=[],this.searchParam={}}ngOnInit(){super.ngOnInit(),this.initTable()}reloadTable(){this.message.info("\u0110\xe3 l\xe0m m\u1edbi"),this.getDataList()}add(){this.subdemoService.show({nzTitle:"Th\u1ebfm m\u1edbi"}).subscribe(e=>{e&&0!==e.status&&this.demoStoreService.add({pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,data:e.modalValue})})}delAll(){}edit(e,i,n,r){this.subdemoService.show({nzTitle:"C\u1eadp nh\u1eadt"},{id:e,idpro:i,proname:n,price:r}).subscribe(({modalValue:l,status:C})=>{0!==C&&(l.id=e,this.demoStoreService.edit({pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,data:l}))})}del(e){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a hay kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 x\xe1c th\u1ef1c",nzOnOk:()=>{this.demoStoreService.del({pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,data:e})}})}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}selectdChecked(e){this.checkedCashArray=[...e]}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}changePageSize(e){this.tableConfig.pageSize=e}getDataList(e){this.demoStoreService.sendList({pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||this.tableConfig.pageIndex}),this.demoStoreService.getProductStore().pipe((0,Y.U)(()=>{this.tableLoading(!1)})).subscribe(n=>{const{list:r,total:s,pageNum:l}=n;this.dataList=[...r],this.tableConfig.total=s,this.tableConfig.pageIndex=l,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"STT",field:"idpro",width:180},{title:"Name",field:"proname",width:180},{title:"Price",field:"price",width:120},{title:"Actions",tdTemplate:this.oprationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}static#t=this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.otF(o)))(n||o)}})();static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-demo"]],viewQuery:function(i,n){if(1&i&&(t.CC$(w,7),t.CC$(H,7),t.CC$(K,7),t.CC$(W,7)),2&i){let r;t.wto(r=t.Gqi())&&(n.oprationTpl=r.first),t.wto(r=t.Gqi())&&(n.idproTpl=r.first),t.wto(r=t.Gqi())&&(n.pronameTpl=r.first),t.wto(r=t.Gqi())&&(n.priceTpl=r.first)}},standalone:!0,features:[t.eg9,t.UHJ],decls:10,vars:6,consts:[[3,"pageHeaderInfo"],["huongdanTpl",""],[1,"normal-table-wrap"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["oprationTpl",""],["tableBtns",""],["nz-button","","nzType","primary","nzShape","round",3,"nzSize","click"],["nz-icon","","nzType","star","nzTheme","outline"],[1,"operate-text"],["nz-button","","nzGhost","","nzType","primary",3,"click"],["nz-button","","znGhost","","nzType","primary",3,"click"],["zn-icon","","nzType","plus"],["zn-icon","","nzType","delete"]],template:function(i,n){if(1&i&&(t.wR5(0,"app-page-header",0),t.yuY(1,M,3,1,"ng-template",null,1,t.gJz),t.I0R(3,"div",2)(4,"app-card-table-wrap",3),t.qCj("reload",function(){return n.reloadTable()}),t.I0R(5,"app-ant-table",4),t.qCj("selectedChange",function(s){return n.selectdChecked(s)})("changePageSize",function(s){return n.changePageSize(s)})("changePageNum",function(s){return n.getDataList(s)}),t.C$Y(),t.yuY(6,Z,6,0,"ng-template",null,5,t.gJz),t.C$Y(),t.yuY(8,q,6,0,"ng-template",null,6,t.gJz),t.C$Y()),2&i){const r=t.Gew(9);t.E7m("pageHeaderInfo",n.pageHeaderInfo),t.yG2(4),t.E7m("tableTitle","Danh s\xe1ch s\u1ea3n ph\u1ea9m")("btnTpl",r),t.yG2(),t.E7m("checkedCashArrayFromComment",n.checkedCashArray)("tableConfig",n.tableConfig)("tableData",n.dataList)}},dependencies:[F.Q,d.EV,d.Ez,V.k,j.o9,I.Q,G.E],changeDetection:0})}return o})()}}]);