"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[9623],{9623:(ge,S,o)=>{o.r(S),o.d(S,{DatascComponent:()=>pe});var e=o(2223),F=o(5855),c=o(9401),D=o(8746),X=o(2195),Q=o(5529),U=o(4178),k=o(4895),z=o(3642),m=o(4701),T=o(1929),f=o(2701),h=o(8397),_=o(4259),x=o(6434),l=o(1267),b=o(1135),I=o(9841),H=o(8372),Y=o(1884),N=o(4004);class M{constructor(s,t=[]){this.treeData=s,this.needsToExpanded=t}}var P=o(418),G=o(964),w=o(8442),A=o(6706);let v=(()=>{class n{constructor(t,a){this.cdr=t,this.dataService=a,this.TREE_DATA$=new b.X([]),this.currentSelNode=null,this.transformer=(i,r)=>({expandable:!!i.children&&i.children.length>0,menuName:i.menuName,level:r,id:i.id,disabled:!!i.disabled}),this.selectListSelection=new P.Ov(!1),this.treeControl=new G.C2(i=>i.level,i=>i.expandable),this.treeFlattener=new l.T$(this.transformer,i=>i.level,i=>i.expandable,i=>i.children),this.dataSource=new l.uF(this.treeControl,this.treeFlattener),this.hasChild=(i,r)=>r.expandable}resetTree(){this.currentSelNode&&(this.selectListSelection.deselect(this.currentSelNode),this.currentSelNode=null,this.cdr.markForCheck())}clickNode(t){this.currentSelNode=t,this.selectListSelection.select(t)}initDate(){this.dataService.getMenuListParams({pageSize:0,pageNum:0}).subscribe(a=>{this.TREE_DATA$.next((0,w.RA)(a.list))})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(A.O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L=(()=>{class n{constructor(t){this.menutreeService=t,this.expandedNodes=[],this.searchValue="",this.originData$=this.menutreeService.TREE_DATA$,this.searchValue$=new b.X(""),this.filteredData$=(0,I.a)([this.originData$,this.searchValue$.pipe((0,H.b)(200),(0,Y.x)(),(0,N.U)(a=>this.searchValue=a))]).pipe((0,N.U)(([a,i])=>i?this.filterTreeData(a,i):new M(a))),this.filteredData$.subscribe(a=>{this.menutreeService.dataSource.setData(a.treeData),this.searchValue?(0===this.expandedNodes.length&&(this.expandedNodes=this.menutreeService.treeControl.expansionModel.selected,this.menutreeService.treeControl.expansionModel.clear()),this.menutreeService.treeControl.expansionModel.select(...a.needsToExpanded)):this.expandedNodes.length&&(this.menutreeService.treeControl.expansionModel.clear(),this.menutreeService.treeControl.expansionModel.select(...this.expandedNodes),this.expandedNodes=[]),this.menutreeService.treeControl.expandAll()})}filterTreeData(t,a){const i=new Set,r=(u,p)=>{if(-1!==u.menuName.search(a))return p.push(u),p;if(Array.isArray(u.children)){const J=u.children.reduce((C,me)=>r(me,C),[]);if(J.length){const C={...u,children:J};i.add(C),p.push(C)}}return p},d=t.reduce((u,p)=>r(p,u),[]);return new M(d,[...i])}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=o(2242);function V(n,s){1&n&&e._UZ(0,"i",8)}function $(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-tree-node",9),e._UZ(1,"nz-tree-node-toggle",10),e.TgZ(2,"nz-tree-node-option",11),e.NdJ("nzClick",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.clickNode(r))}),e._UZ(3,"span",12),e.ALo(4,"nzHighlight"),e.qZA()()}if(2&n){const t=s.$implicit,a=e.oxw();e.xp6(2),e.Q6J("nzDisabled",t.disabled)("nzSelected",a.selectListSelection.isSelected(t)),e.xp6(1),e.Q6J("innerHTML",e.gM2(4,3,t.menuName,a.menutreesearchService.searchValue,"i","highlight"),e.oJD)}}function B(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-tree-node",9)(1,"nz-tree-node-toggle"),e._UZ(2,"i",13),e.qZA(),e.TgZ(3,"nz-tree-node-option",11),e.NdJ("nzClick",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.clickNode(r))}),e._UZ(4,"span",12),e.ALo(5,"nzHighlight"),e.qZA()()}if(2&n){const t=s.$implicit,a=e.oxw();e.xp6(3),e.Q6J("nzDisabled",t.disabled)("nzSelected",a.selectListSelection.isSelected(t)),e.xp6(1),e.Q6J("innerHTML",e.gM2(5,3,t.menuName,a.menutreesearchService.searchValue,"i","highlight"),e.oJD)}}const O=function(){return{padding:0}};let R=(()=>{class n{constructor(t,a){this.menutreesearchService=t,this.menutreeService=a,this.menutIdEven=new e.vpe,this.selectListSelection=this.menutreeService.selectListSelection,this.treeControl=this.menutreeService.treeControl}changeSearch(t){this.menutreesearchService.searchValue$.next(t)}clickNode(t){this.menutreeService.clickNode(t),this.menutIdEven.emit(t.id)}resetTree(){this.menutreeService.resetTree()}ngOnInit(){this.menutreeService.initDate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-tree"]],outputs:{menutIdEven:"menutIdEven"},standalone:!0,features:[e._Bn([v,L]),e.jDz],decls:9,vars:7,consts:[["nzHoverable","",3,"nzBodyStyle"],[1,"p-8"],["nzSize","small",3,"nzSuffix"],["type","text","ngModel","","nz-input","","nzSize","small","placeholder","Search",3,"ngModelChange"],["suffixIcon",""],[3,"nzBlockNode","nzDataSource","nzTreeControl"],["nzTreeNodePadding","",4,"nzTreeNodeDef"],["nzTreeNodePadding","",4,"nzTreeNodeDef","nzTreeNodeDefWhen"],["nz-icon","","nzType","search"],["nzTreeNodePadding",""],["nzTreeNodeNoopToggle",""],[3,"nzDisabled","nzSelected","nzClick"],[3,"innerHTML"],["nz-icon","","nzTreeNodeToggleRotateIcon","","nzType","caret-down"]],template:function(t,a){if(1&t&&(e.TgZ(0,"nz-card",0)(1,"div",1)(2,"nz-input-group",2)(3,"input",3),e.NdJ("ngModelChange",function(r){return a.changeSearch(r)}),e.qZA()(),e.YNc(4,V,1,0,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"nz-tree-view",5),e.YNc(7,$,5,8,"nz-tree-node",6),e.YNc(8,B,6,8,"nz-tree-node",7),e.qZA()()),2&t){const i=e.MAs(5);e.Q6J("nzBodyStyle",e.DdM(6,O)),e.xp6(2),e.Q6J("nzSuffix",i),e.xp6(4),e.Q6J("nzBlockNode",!0)("nzDataSource",a.menutreeService.dataSource)("nzTreeControl",a.treeControl),e.xp6(2),e.Q6J("nzTreeNodeDefWhen",a.menutreeService.hasChild)}},dependencies:[z.vh,z.bd,_.sL,y.w,h.o7,h.Zp,h.gB,h.ke,c.u5,c.Fj,c.JJ,c.On,f.PV,f.Ls,l.zU,l.f_,l.kY,l.cm,l.V_,l.aX,l.e1,l.nR,l.Hk,x.C,x.U],encapsulation:2,changeDetection:0}),n})();var Z=o(9706),E=o(4247),K=o(5656),j=o(3272),W=o(8551),g=o(4556),q=o(4246);let ee=(()=>{class n{constructor(t){this.http=t}getDataSc(t){return this.http.post(g.C,t)}addDatasc(t){return this.http.post(g.qn,t)}delDatasc(t){return this.http.post(g.Ei,{id:t})}editDatasc(t){return this.http.put(g.Ci,t)}detailDatasc(t){return this.http.post(g.T0,{id:t})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(q.q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const te=["operationTpl"],ne=["availableFlag"];function ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"span",21)(1,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().id,r=e.oxw();return e.KtG(r.edit(i))}),e._uU(2,"C\u1eadp nh\u1eadt"),e.qZA()()}}function ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"span",21)(1,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().id,r=e.oxw();return e.KtG(r.del(i))}),e._uU(2,"X\xf3a"),e.qZA()()}}function oe(n,s){if(1&n&&(e.YNc(0,ae,3,0,"span",20),e.YNc(1,ie,3,0,"span",20)),2&n){const t=e.oxw();e.Q6J("appAuth",t.ActionCode.DataScEdit),e.xp6(1),e.Q6J("appAuth",t.ActionCode.DataScDel)}}function re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.add(i.idmenu))}),e._UZ(1,"i",26),e._uU(2," Th\xeam m\u1edbi "),e.qZA()}}function se(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.allDel())}),e._UZ(1,"i",28),e._uU(2," X\xf3a t\u1ea5t c\u1ea3 "),e.qZA()}}function ce(n,s){if(1&n&&(e.YNc(0,re,3,0,"button",23),e.YNc(1,se,3,0,"button",24)),2&n){const t=e.oxw();e.Q6J("appAuth",t.ActionCode.DataScAdd),e.xp6(1),e.Q6J("appAuth",t.ActionCode.DataScDelAll)}}function le(n,s){1&n&&e._UZ(0,"nz-switch",29),2&n&&e.Q6J("ngModel",s.available)("nzControl",!0)("nzDisabled",!0)}const de=function(){return[16,16]},ue=function(){return{"padding-bottom":0}},he=function(){return{xs:8,sm:16,md:24}};let pe=(()=>{class n{constructor(t,a,i,r,d){this.menuService=t,this.message=a,this.modalSrv=i,this.cdr=r,this.dataService=d,this.searchParam={},this.dataList=[],this.checkedCashArray=[],this.ActionCode=X.h,this.pageHeaderInfo={title:"Qu\u1ea3n l\xfd d\u1eed li\u1ec7u SC",breadcrumb:["Home","H\u1ec7 th\u1ed1ng","Qu\u1ea3n l\xfd d\u1eed li\u1ec7u SC"]},this.destroyRef=(0,e.f3M)(e.ktI),this.idmenu="",this.menuName=""}ngOnInit(){this.initTable()}searchMenutDatasc(t){this.idmenu=t,this.searchParam.idmenu=t,this.getDataList(),this.getNameMenu(this.idmenu)}edit(t){}del(t){}add(t){}allDel(){}addEditData(t,a){console.log(t),this.dataService[a](t).pipe((0,D.x)(()=>{this.tableLoading(!1)})).subscribe(()=>{this.getDataList()})}getDataList(t){this.tableLoading(!0),this.dataService.getDataSc({pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam}).pipe((0,D.x)(()=>{this.tableLoading(!1)}),(0,F.sL)(this.destroyRef)).subscribe(i=>{const{list:r,total:d,pageNum:u}=i;this.dataList=[...r],this.tableConfig.total=d,this.tableConfig.pageIndex=u,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}selectedChecked(t){this.checkedCashArray=[...t]}changePageSize(t){}resetForm(){this.searchParam={},this.getDataList()}getNameMenu(t){this.menuService.getMenuDetail(t).subscribe(a=>{this.menuName=a.menuName})}initTable(){this.tableConfig={showCheckbox:!0,headers:[{title:"Ti\xeau \u0111\u1ec1 1",field:"title1",width:120},{title:"Ti\xeau \u0111\u1ec1 1",field:"title2",width:120},{title:"Ng\xf4n ng\u1eef",field:"lang",width:120},{title:"V\u1ecb tr\xed",field:"vitri",width:100},{title:"Tr\u1ea1ng th\xe1i",width:150,field:"status",tdTemplate:this.availableFlag},{title:"C\u1eadp nh\u1eadt",tdTemplate:this.operationTpl,width:200,fixed:!0,fixedDir:"right"}],total:0,loading:!1,pageSize:10,pageIndex:1}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.O),e.Y36(j.dD),e.Y36(W.Sf),e.Y36(e.sBO),e.Y36(ee))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-datasc"]],viewQuery:function(t,a){if(1&t&&(e.Gf(te,7),e.Gf(ne,7)),2&t){let i;e.iGM(i=e.CRH())&&(a.operationTpl=i.first),e.iGM(i=e.CRH())&&(a.availableFlag=i.first)}},standalone:!0,features:[e.jDz],decls:32,vars:44,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],[3,"menutIdEven"],["menuttree",""],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],[3,"nzFor"],["name","title","nz-input","","placeholder","Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 t\xecm ki\u1ebfm",3,"ngModel","ngModelChange"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[3,"btnTpl","tableTitle","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","changePageNum","changePageSize","selectedChange"],["operationTpl",""],["tableBtns",""],["availableFlag",""],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzGhost","","nzType","primary",3,"click"],["class","m-r-8","nz-button","","nzType","primary",3,"click",4,"appAuth"],["nz-button","","nzType","default",3,"click",4,"appAuth"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","delete"],["nzCheckedChildren","Cho ph\xe9p","nzUnCheckedChildren","V\xf4 hi\u1ec7u h\xf3a",3,"ngModel","nzControl","nzDisabled"]],template:function(t,a){if(1&t&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-menu-tree",4,5),e.NdJ("menutIdEven",function(r){return a.searchMenutDatasc(r)}),e.qZA()(),e.TgZ(6,"div",3)(7,"nz-card",6)(8,"form",7)(9,"div",2)(10,"div",3)(11,"nz-form-item")(12,"nz-form-label",8),e._uU(13,"Ti\xeau \u0111\u1ec1"),e.qZA(),e.TgZ(14,"nz-form-control")(15,"input",9),e.NdJ("ngModelChange",function(r){return a.searchParam.title1=r}),e.qZA()()()(),e._UZ(16,"div",3),e.TgZ(17,"div",10)(18,"button",11),e.NdJ("click",function(){return a.getDataList()}),e._UZ(19,"i",12),e._uU(20," T\xecm ki\u1ebfm "),e.qZA(),e.TgZ(21,"button",13),e.NdJ("click",function(){return a.resetForm()}),e._UZ(22,"i",14),e._uU(23," C\xe0i l\u1ea1i "),e.qZA()()()()(),e.TgZ(24,"app-card-table-wrap",15),e.NdJ("reload",function(){return a.reloadTable()}),e.TgZ(25,"app-ant-table",16),e.NdJ("changePageNum",function(r){return a.getDataList(r)})("changePageSize",function(r){return a.changePageSize(r)})("selectedChange",function(r){return a.selectedChecked(r)}),e.qZA(),e.YNc(26,oe,2,2,"ng-template",null,17,e.W1O),e.qZA(),e.YNc(28,ce,2,2,"ng-template",null,18,e.W1O),e.YNc(30,le,1,3,"ng-template",null,19,e.W1O),e.qZA()()()),2&t){const i=e.MAs(29);e.Q6J("pageHeaderInfo",a.pageHeaderInfo),e.xp6(2),e.Q6J("nzGutter",e.DdM(41,de)),e.xp6(1),e.Q6J("nzLg",6)("nzMd",24)("nzSm",24)("nzXl",6)("nzXs",24)("nzXXl",6),e.xp6(3),e.Q6J("nzLg",18)("nzMd",24)("nzSm",24)("nzXl",18)("nzXs",24)("nzXXl",18),e.xp6(1),e.Q6J("nzBodyStyle",e.DdM(42,ue)),e.xp6(2),e.Q6J("nzGutter",e.DdM(43,he)),e.xp6(1),e.Q6J("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.xp6(5),e.Q6J("ngModel",a.searchParam.title1),e.xp6(1),e.Q6J("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.xp6(1),e.Q6J("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),e.xp6(1),e.Q6J("nzType","primary"),e.xp6(6),e.Q6J("btnTpl",i)("tableTitle","Danh s\xe1ch ti\xeau \u0111\u1ec1"),e.xp6(1),e.Q6J("checkedCashArrayFromComment",a.checkedCashArray)("tableConfig",a.tableConfig)("tableData",a.dataList)}},dependencies:[_.sL,_.ix,y.w,E.dQ,E.vG,Z.m,Z.i,T.Jb,T.t3,T.SK,R,k.q,Q.q,U.p,z.vh,z.bd,c.u5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,m.U5,m.Lr,m.Nx,m.iK,m.Fd,h.o7,h.Zp,f.PV,f.Ls,K.x],encapsulation:2,changeDetection:0}),n})()}}]);