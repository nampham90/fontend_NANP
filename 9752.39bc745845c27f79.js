"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[9752],{9752:(Yt,N,s)=>{s.r(N),s.d(N,{DatascComponent:()=>$t});var t=s(4496),U=s(4872),c=s(6504),M=s(8824),B=s(472),z=s(7592),P=s(592);let V=(()=>{class n{constructor(e){this.http=e}getDataSc(e){return this.http.post(z.Mx,e)}addDatasc(e){return this.http.post(z.ye,e)}delDatasc(e){return this.http.post(z.ug,{id:e})}editDatasc(e){return this.http.put(z.W8,e)}detailDatasc(e){return this.http.post(z.qE,{id:e})}static#t=this.\u0275fac=function(i){return new(i||n)(t.CoB(P.k))};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var D=s(8332),A=s(3652),x=s(2624),j=s(5072),f=s(5128),m=s(1752),g=s(2532),v=s(6088),u=s(2605),R=s(9432),_=s(9116),C=s(460),k=s(4235),d=s(9880),F=s(6700),Q=s(6040),J=s(4680),H=s(4e3),L=s(4704);class O{constructor(l,e=[]){this.treeData=l,this.needsToExpanded=e}}var K=s(3412),W=s(8376),Z=s(4984);let y=(()=>{class n{constructor(e,i){this.cdr=e,this.dataService=i,this.TREE_DATA$=new F.g([]),this.currentSelNode=null,this.transformer=(a,o)=>({expandable:!!a.children&&a.children.length>0,menuName:a.menuName,level:o,id:a.id,disabled:!!a.disabled}),this.selectListSelection=new K.e2(!1),this.treeControl=new W.oz(a=>a.level,a=>a.expandable),this.treeFlattener=new d.W8(this.transformer,a=>a.level,a=>a.expandable,a=>a.children),this.dataSource=new d.mE(this.treeControl,this.treeFlattener),this.hasChild=(a,o)=>o.expandable}resetTree(){this.currentSelNode&&(this.selectListSelection.deselect(this.currentSelNode),this.currentSelNode=null,this.cdr.markForCheck())}clickNode(e){this.currentSelNode=e,this.selectListSelection.select(e)}initDate(){this.dataService.getMenuListParams({pageSize:0,pageNum:0}).subscribe(i=>{this.TREE_DATA$.next((0,Z.ot)(i.list))})}static#t=this.\u0275fac=function(i){return new(i||n)(t.CoB(t.kD9),t.CoB(D.O))};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$=(()=>{class n{constructor(e){this.menutreeService=e,this.expandedNodes=[],this.searchValue="",this.originData$=this.menutreeService.TREE_DATA$,this.searchValue$=new F.g(""),this.filteredData$=(0,Q.E)([this.originData$,this.searchValue$.pipe((0,J.o)(200),(0,H.a)(),(0,L.k)(i=>this.searchValue=i))]).pipe((0,L.k)(([i,a])=>a?this.filterTreeData(i,a):new O(i))),this.filteredData$.subscribe(i=>{this.menutreeService.dataSource.setData(i.treeData),this.searchValue?(0===this.expandedNodes.length&&(this.expandedNodes=this.menutreeService.treeControl.expansionModel.selected,this.menutreeService.treeControl.expansionModel.clear()),this.menutreeService.treeControl.expansionModel.select(...i.needsToExpanded)):this.expandedNodes.length&&(this.menutreeService.treeControl.expansionModel.clear(),this.menutreeService.treeControl.expansionModel.select(...this.expandedNodes),this.expandedNodes=[]),this.menutreeService.treeControl.expandAll()})}filterTreeData(e,i){const a=new Set,o=(h,p)=>{if(-1!==h.menuName.search(i))return p.push(h),p;if(Array.isArray(h.children)){const X=h.children.reduce((S,wt)=>o(wt,S),[]);if(X.length){const S={...h,children:X};a.add(S),p.push(S)}}return p},r=e.reduce((h,p)=>o(p,h),[]);return new O(r,[...a])}static#t=this.\u0275fac=function(i){return new(i||n)(t.CoB(y))};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b=s(3064);function q(n,l){1&n&&t.wR5(0,"i",8)}function tt(n,l){if(1&n){const e=t.KQA();t.I0R(0,"nz-tree-node",9),t.wR5(1,"nz-tree-node-toggle",10),t.I0R(2,"nz-tree-node-option",11),t.qCj("nzClick",function(){const o=t.usT(e).$implicit,r=t.GaO();return t.CGJ(r.clickNode(o))}),t.wR5(3,"span",12),t.wVc(4,"nzHighlight"),t.C$Y()()}if(2&n){const e=l.$implicit,i=t.GaO();t.yG2(2),t.E7m("nzDisabled",e.disabled)("nzSelected",i.selectListSelection.isSelected(e)),t.yG2(),t.E7m("innerHTML",t.wB1(4,3,e.menuName,i.menutreesearchService.searchValue,"i","highlight"),t.E3n)}}function et(n,l){if(1&n){const e=t.KQA();t.I0R(0,"nz-tree-node",9)(1,"nz-tree-node-toggle"),t.wR5(2,"i",13),t.C$Y(),t.I0R(3,"nz-tree-node-option",11),t.qCj("nzClick",function(){const o=t.usT(e).$implicit,r=t.GaO();return t.CGJ(r.clickNode(o))}),t.wR5(4,"span",12),t.wVc(5,"nzHighlight"),t.C$Y()()}if(2&n){const e=l.$implicit,i=t.GaO();t.yG2(3),t.E7m("nzDisabled",e.disabled)("nzSelected",i.selectListSelection.isSelected(e)),t.yG2(),t.E7m("innerHTML",t.wB1(5,3,e.menuName,i.menutreesearchService.searchValue,"i","highlight"),t.E3n)}}const nt=()=>({padding:0});let at=(()=>{class n{constructor(e,i){this.menutreesearchService=e,this.menutreeService=i,this.menutIdEven=new t._w7,this.selectListSelection=this.menutreeService.selectListSelection,this.treeControl=this.menutreeService.treeControl}changeSearch(e){this.menutreesearchService.searchValue$.next(e)}clickNode(e){this.menutreeService.clickNode(e),this.menutIdEven.emit(e.id)}resetTree(){this.menutreeService.resetTree()}ngOnInit(){this.menutreeService.initDate()}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1($),t.GI1(y))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-menu-tree"]],outputs:{menutIdEven:"menutIdEven"},standalone:!0,features:[t.M5G([y,$]),t.UHJ],decls:9,vars:7,consts:[["nzHoverable","",3,"nzBodyStyle"],[1,"p-8"],["nzSize","small",3,"nzSuffix"],["type","text","ngModel","","nz-input","","nzSize","small","placeholder","Search",3,"ngModelChange"],["suffixIcon",""],[3,"nzBlockNode","nzDataSource","nzTreeControl"],["nzTreeNodePadding","",4,"nzTreeNodeDef"],["nzTreeNodePadding","",4,"nzTreeNodeDef","nzTreeNodeDefWhen"],["nz-icon","","nzType","search"],["nzTreeNodePadding",""],["nzTreeNodeNoopToggle",""],[3,"nzDisabled","nzSelected","nzClick"],[3,"innerHTML"],["nz-icon","","nzTreeNodeToggleRotateIcon","","nzType","caret-down"]],template:function(i,a){if(1&i&&(t.I0R(0,"nz-card",0)(1,"div",1)(2,"nz-input-group",2)(3,"input",3),t.qCj("ngModelChange",function(r){return a.changeSearch(r)}),t.C$Y()(),t.yuY(4,q,1,0,"ng-template",null,4,t.gJz),t.C$Y(),t.I0R(6,"nz-tree-view",5),t.yuY(7,tt,5,8,"nz-tree-node",6)(8,et,6,8,"nz-tree-node",7),t.C$Y()()),2&i){const o=t.Gew(5);t.E7m("nzBodyStyle",t.q4q(6,nt)),t.yG2(2),t.E7m("nzSuffix",o),t.yG2(4),t.E7m("nzBlockNode",!0)("nzDataSource",a.menutreeService.dataSource)("nzTreeControl",a.treeControl),t.yG2(2),t.E7m("nzTreeNodeDefWhen",a.menutreeService.hasChild)}},dependencies:[f.iq,f.Q9,C.EV,b.k,u.OA,u.cv,u.qG,u.sj,c.y,c.ot,c.ue,c._G,v.Wy,v.If,d.cB,d.e,d.Oc,d.o3,d.qC,d.k1,d._8,d.ks,d.Cs,k.a,k.j],encapsulation:2,changeDetection:0})}return n})();var T=s(8935),G=s(5584),it=s(872),ot=s(7340),st=s(688),rt=s(788),w=s(3692),I=s(268),E=s(2700);let lt=(()=>{class n{constructor(){this.cartItems=(0,t.OCB)([])}addToCart(e){this.cartItems.update(i=>[...i,e])}removeFromCart(e){this.cartItems.update(i=>i.filter(a=>a.vitri!==e.vitri))}updateInCart(e){this.cartItems.update(i=>i.map(a=>a.vitri===e.vitri?e:a))}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ct=["operationTpl"];function dt(n,l){if(1&n&&t.wR5(0,"nz-option",19),2&n){const e=l.$implicit;t.E7m("nzLabel",e.label)("nzValue",e.value)}}function mt(n,l){1&n&&t.wR5(0,"nz-input-number",10),2&n&&t.E7m("nzMin",0)("nzMax",100)("nzStep",1)("nzDisabled",!0)}function ht(n,l){1&n&&t.wR5(0,"nz-input-number",20),2&n&&t.E7m("nzMin",0)("nzMax",100)("nzStep",1)}function ut(n,l){if(1&n){const e=t.KQA();t.I0R(0,"button",21),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.addList())}),t.OEk(1),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(),t.oRS("Confirm",e.dataList().length,"")}}function pt(n,l){if(1&n){const e=t.KQA();t.I0R(0,"a",21),t.qCj("click",function(){const o=t.usT(e).vitri,r=t.GaO();return t.CGJ(r.edit(o))}),t.OEk(1,"C\u1eadp nh\u1eadt"),t.C$Y(),t.I0R(2,"a",22),t.qCj("click",function(){const o=t.usT(e).vitri,r=t.GaO();return t.CGJ(r.del(o))}),t.OEk(3,"X\xf3a"),t.C$Y()}}function zt(n,l){if(1&n){const e=t.KQA();t.I0R(0,"button",22),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.allDel())}),t.wR5(1,"i",23),t.OEk(2," X\xf3a t\u1ea5t c\u1ea3 "),t.C$Y()}}function gt(n,l){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=t.GaO().$implicit;t.yG2(),t.cNF(e.errors.message)}}function Ct(n,l){1&n&&(t.SAx(0),t.OEk(1,"Ph\u1ea7n b\u1eaft bu\u1ed9c"),t.k70())}function ft(n,l){if(1&n&&t.yuY(0,gt,2,1,"ng-container")(1,Ct,2,0,"ng-container"),2&n){const e=l.$implicit;t.C0Y(0,e.hasError("message")?0:-1),t.yG2(),t.C0Y(1,e.hasError("required")?1:-1)}}let vt=(()=>{class n{constructor(e){this.modalRef=e,this.nzModalData=(0,t.uUt)(_.aG),this.isEdit=!1,this.isReadonly=!1,this.messageErrors=[],this.lang=[],this.menuName="",this.listdatasc=[],this.tieudeNew="",this.showBtnAddList=!1,this.mode=!1,this.fb=(0,t.uUt)(c.im),this.vf=(0,t.uUt)(st.u),this.message=(0,t.uUt)(R.yo),this.cdr=(0,t.uUt)(t.kD9),this.dataSevice=(0,t.uUt)(lt),this.modalSrv=(0,t.uUt)(_.mU),this.dataList=this.dataSevice.cartItems,this.checkedCashArray=[],this.lang=[{value:"vi",label:"Ti\u1ebfng vi\u1ec7t"},{value:"en",label:"Ti\u1ebfng Anh"},{value:"ja",label:"Ti\u1ebfng Nh\u1eadt"}]}getAsyncFnData(e){return(0,E.of)(e)}getCurrentValue(){return this.addEditForm.value.list=this.listdatasc,(0,E.of)(this.addEditForm.value)}get f(){return this.addEditForm.controls}ngOnInit(){this.initForm(),this.initTable(),this.isEdit=!!this.nzModalData,this.isEdit&&this.nzModalData._id&&(this.isEdit=!0,this.addEditForm.patchValue(this.nzModalData),this.showBtnAddList=!0)}addList(){if(!(0,rt.qg)(this.addEditForm))return(0,E.of)(!1);let e={idmenu:this.nzModalData.idmenu,title1:this.addEditForm.value.title1,title2:this.addEditForm.value.title2,lang:this.addEditForm.value.lang,vitri:this.addEditForm.value.vitri,status:this.addEditForm.value.status};return!0===this.mode?(this.dataSevice.updateInCart(e),this.addEditForm.reset({status:!0}),this.mode=!1,""):this.dataList().find(a=>a.vitri===e.vitri)?(this.message.error("Ti\u1ec1u \u0111\u1ec3 n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i"),(0,E.of)(!1)):(this.dataSevice.addToCart(e),this.getDataList(),this.tieudeNew=e.title1,this.addEditForm.reset({status:!0}),"")}initForm(){this.addEditForm=this.fb.group({title1:[null,[c.AQ.required]],title2:[null],status:[!0],lang:["vi",[c.AQ.required]],vitri:[null],list:this.listdatasc})}edit(e){let i=this.dataList().find(a=>a.vitri===e);i&&(this.addEditForm.patchValue(i),this.mode=!0)}del(e){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u0103n mu\u1ed1n x\xf3a kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ti\u1ebfp t\u1ee5c !",nzOnOk:()=>{this.tableLoading(!0);let i=this.dataList().find(a=>a.vitri===e);i&&(this.dataSevice.removeFromCart(i),this.tableLoading(!1))}})}allDel(){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u0103n mu\u1ed1n x\xf3a kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ti\u1ebfp t\u1ee5c !",nzOnOk:()=>{this.dataSevice.cartItems.set([])}})}getDataList(e){this.tableLoading(!1)}tableChangeDectction(){this.cdr.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){this.tableConfig.pageSize=e}initTable(){this.tableConfig={showCheckbox:!0,headers:[{title:"Title 1",field:"title1",width:200},{title:"title 2",width:200,field:"title2"},{title:"Ng\xf4n ng\u1eef",width:100,field:"lang"},{title:"V\u1ecb tr\xed",width:80,field:"vitri"},{title:"V\u1eadn h\xe0nh",tdTemplate:this.operationTpl,width:200,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(_.U7))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-datasc-modal"]],viewQuery:function(i,a){if(1&i&&t.CC$(ct,7),2&i){let o;t.wto(o=t.Gqi())&&(a.operationTpl=o.first)}},standalone:!0,features:[t.UHJ],decls:38,vars:32,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","title1",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","name","title2","id","title2","formControlName","title1","id","title1","placeholder","Nh\u1eadp ti\xeau \u0111\u1ec1 1"],["nzFor","title2",3,"nzSm","nzXs"],["nz-input","","name","title2","id","title2","formControlName","title2","id","title2","placeholder","Nh\u1eadp ti\xeau \u0111\u1ec1 2"],["nzRequired","","nzFor","lang",3,"nzSm","nzXs"],["nzShowSearch","","nzAllowClear","","formControlName","lang","nzPlaceHolder","Ng\xf4n ng\u1eef"],["nzRequired","","nzFor","vitri",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng",3,"nzSm","nzXs"],["name","vitri","id","vitri","formControlName","vitri",3,"nzMin","nzMax","nzStep","nzDisabled"],["nzRequired","","nzFor","status",3,"nzSm","nzXs"],["formControlName","status","nzCheckedChildren","Cho ph\xe9p","nzUnCheckedChildren","V\xf4 hi\u1ec7u h\xf3a"],["nz-button","","nzType","primary"],[3,"btnTpl","tableTitle","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","changePageNum","changePageSize","selectedChange"],["operationTpl",""],["tableBtns",""],["combineTpl",""],[3,"nzLabel","nzValue"],["name","vitri","id","vitri","formControlName","vitri",3,"nzMin","nzMax","nzStep"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","delete"]],template:function(i,a){if(1&i&&(t.I0R(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t.OEk(3,"Ti\xeau \u0111\u1ec1 1"),t.C$Y(),t.I0R(4,"nz-form-control",2),t.wR5(5,"input",3),t.C$Y()(),t.I0R(6,"nz-form-item")(7,"nz-form-label",4),t.OEk(8,"Ti\u1ec1u \u0111\u1ec1 2"),t.C$Y(),t.I0R(9,"nz-form-control",2),t.wR5(10,"input",5),t.C$Y()(),t.I0R(11,"nz-form-item")(12,"nz-form-label",6),t.OEk(13,"Ng\xf4n ng\u1eef"),t.C$Y(),t.I0R(14,"nz-form-control",2)(15,"nz-select",7),t.c53(16,dt,1,2,"nz-option",19,t.oxv),t.C$Y()()(),t.I0R(18,"nz-form-item")(19,"nz-form-label",8),t.OEk(20,"V\u1ecb tr\xed"),t.C$Y(),t.I0R(21,"nz-form-control",9),t.yuY(22,mt,1,4,"nz-input-number",10)(23,ht,1,3),t.C$Y()(),t.I0R(24,"nz-form-item")(25,"nz-form-label",11),t.OEk(26,"Status"),t.C$Y(),t.I0R(27,"nz-form-control",2),t.wR5(28,"nz-switch",12),t.C$Y()(),t.yuY(29,ut,2,1,"button",13),t.C$Y(),t.I0R(30,"app-card-table-wrap",14),t.qCj("reload",function(){return a.reloadTable()}),t.I0R(31,"app-ant-table",15),t.qCj("changePageNum",function(r){return a.getDataList(r)})("changePageSize",function(r){return a.changePageSize(r)})("selectedChange",function(r){return a.selectedChecked(r)}),t.C$Y(),t.yuY(32,pt,4,0,"ng-template",null,16,t.gJz),t.C$Y(),t.yuY(34,zt,3,0,"ng-template",null,17,t.gJz)(36,ft,2,2,"ng-template",null,18,t.gJz)),2&i){const o=t.Gew(35),r=t.Gew(37);t.E7m("formGroup",a.addEditForm),t.yG2(2),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24)("nzErrorTip",r),t.yG2(3),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24)("nzErrorTip",r),t.yG2(3),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24)("nzErrorTip",r),t.yG2(2),t.oho(a.lang),t.yG2(3),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24),t.yG2(),t.C0Y(22,a.mode?22:23),t.yG2(3),t.E7m("nzSm",4)("nzXs",24),t.yG2(2),t.E7m("nzSm",18)("nzXs",24)("nzErrorTip",r),t.yG2(2),t.C0Y(29,a.showBtnAddList?-1:29),t.yG2(),t.E7m("btnTpl",o)("tableTitle","Danh s\xe1ch ti\xeau \u0111\u1ec1"),t.yG2(),t.E7m("checkedCashArrayFromComment",a.checkedCashArray)("tableConfig",a.tableConfig)("tableData",a.dataList())}},dependencies:[x.E,A.Q,c.y,c.sz,c.ot,c.ue,c.u,m.WO,g.QD,g.ox,m.BN,m.qU,m.Qo,m.YZ,C.EV,C.Ez,b.k,G.o9,c.sl,c.uW,c.Wo,I.VL,I.eE,I.Mh,w.uw,w.mG,u.OA,u.cv,T.R,T.c],changeDetection:0})}return n})(),_t=(()=>{class n{constructor(){this.modalWrapService=(0,t.uUt)(ot.K)}getContentComponent(){return vt}show(e={},i){return this.modalWrapService.show(this.getContentComponent(),e,i)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tt=s(6844),Et=s(9072),St=s(8068),Dt=s(9276),yt=s(948),Y=s(2064);const bt=["operationTpl"],Gt=["availableFlag"];function It(n,l){if(1&n){const e=t.KQA();t.I0R(0,"span",21)(1,"button",22),t.qCj("click",function(){t.usT(e);const a=t.GaO().id,o=t.GaO();return t.CGJ(o.edit(a))}),t.OEk(2),t.C$Y()()}if(2&n){const e=t.GaO(2);t.yG2(2),t.cNF(e.formItemNm[16])}}function Nt(n,l){if(1&n){const e=t.KQA();t.I0R(0,"span",21)(1,"button",22),t.qCj("click",function(){t.usT(e);const a=t.GaO().id,o=t.GaO();return t.CGJ(o.del(a))}),t.OEk(2),t.C$Y()()}if(2&n){const e=t.GaO(2);t.yG2(2),t.cNF(e.formItemNm[17])}}function Mt(n,l){if(1&n&&t.yuY(0,It,3,1,"span",20)(1,Nt,3,1,"span",20),2&n){const e=t.GaO();t.E7m("appAuth",e.ActionCode.DataScEdit),t.yG2(),t.E7m("appAuth",e.ActionCode.DataScDel)}}function At(n,l){if(1&n){const e=t.KQA();t.I0R(0,"button",25),t.qCj("click",function(){t.usT(e);const a=t.GaO(2);return t.CGJ(a.add(a.idmenu))}),t.wR5(1,"i",26),t.OEk(2),t.C$Y()}if(2&n){const e=t.GaO(2);t.yG2(2),t.oRS(" ",e.formItemNm[8]," ")}}function xt(n,l){if(1&n){const e=t.KQA();t.I0R(0,"button",27),t.qCj("click",function(){t.usT(e);const a=t.GaO(2);return t.CGJ(a.allDel())}),t.wR5(1,"i",28),t.OEk(2),t.C$Y()}if(2&n){const e=t.GaO(2);t.yG2(2),t.oRS(" ",e.formItemNm[9]," ")}}function Rt(n,l){if(1&n&&t.yuY(0,At,3,1,"button",23)(1,xt,3,1,"button",24),2&n){const e=t.GaO();t.E7m("appAuth",e.ActionCode.DataScAdd),t.yG2(),t.E7m("appAuth",e.ActionCode.DataScDelAll)}}function kt(n,l){1&n&&t.wR5(0,"nz-switch",29),2&n&&t.E7m("ngModel",l.available)("nzControl",!0)("nzDisabled",!0)}const Ft=()=>[16,16],Lt=()=>({"padding-bottom":0}),Ot=()=>({xs:8,sm:16,md:24});let $t=(()=>{class n extends Tt.G{constructor(){super(),this.cdr=(0,t.uUt)(t.kD9),this.spinService=(0,t.uUt)(Dt._),this.dataService=(0,t.uUt)(St.y),this.youtubeModalService=(0,t.uUt)(yt.M),this.router=(0,t.uUt)(Et.E5),this.menusService=(0,t.uUt)(D.O),this.menuService=(0,t.uUt)(D.O),this.message=(0,t.uUt)(R.yo),this.modalSrv=(0,t.uUt)(_.mU),this.datascService=(0,t.uUt)(V),this.modalService=(0,t.uUt)(_t),this.translate=(0,t.uUt)(Y.qS),this.searchParam={},this.dataList=[],this.checkedCashArray=[],this.ActionCode=B.i,this.idmenu="",this.menuName="",this.translate.setDefaultLang(localStorage.getItem("lang")||"vi")}ngOnInit(){super.ngOnInit(),this.initTable()}fnInit(){this.initTable()}searchMenutDatasc(e){this.idmenu=e,this.searchParam.idmenu=e,this.getDataList(),this.getNameMenu(this.idmenu)}edit(e){this.datascService.detailDatasc(e).subscribe(i=>{i&&(this.dataSC=i,this.modalService.show({nzTitle:"C\u1eadp nh\u1eadt"},this.dataSC).subscribe(({modalValue:a,status:o})=>{0!==o&&(a.id=e,this.tableLoading(!0),this.addEditData(a,"editDatasc"))}))})}del(e){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u0103n mu\u1ed1n x\xf3a kh\xf4ng ?",nzContent:"Nh\u1ea5n OK \u0111\u1ec3 ti\u1ebfp t\u1ee5c !",nzOnOk:()=>{this.tableLoading(!0),this.datascService.delDatasc(e).subscribe(i=>{this.getDataList()})}})}add(e){""===e?this.message.warning("B\u1ea1n ch\u01b0a ch\u1ecdn menu n\xe0o \u0111\u1ec3 th\xeam d\u1eef li\u1ec7u !"):this.modalService.show({nzTitle:`Th\xeam M\u1edbi d\u1eef li\u1ec7u cho Menu: ${this.menuName}`},{idmenu:e}).subscribe(i=>{!i||0===i.status||(i.modalValue.idmenu=e,this.tableLoading(!0),this.addEditData(i.modalValue,"addDatasc"))},i=>this.tableLoading(!1))}allDel(){}addEditData(e,i){this.datascService[i](e).pipe((0,M.U)(()=>{this.tableLoading(!1)})).subscribe(()=>{this.getDataList()})}getDataList(e){this.tableLoading(!0);const i={pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam};e||(i.pageNum=1),this.datascService.getDataSc(i).pipe((0,M.U)(()=>{this.tableLoading(!1)}),(0,U.ay)(this.destroyRef)).subscribe(a=>{const{list:o,total:r,pageNum:h}=a;this.dataList=[...o],this.tableConfig.total=r,this.tableConfig.pageIndex=h,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}reloadTable(){this.message.info("L\xe0m m\u1edbi th\xe0nh c\xf4ng"),this.getDataList()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){}resetForm(){this.searchParam={},this.getDataList()}getNameMenu(e){this.menuService.getMenuDetail(e).subscribe(i=>{this.menuName=i.menuName})}initTable(){this.tableConfig={showCheckbox:!0,headers:[{title:this.formItemNm[10],field:"title1",width:120},{title:this.formItemNm[11],field:"title2",width:120},{title:this.formItemNm[12],field:"lang",width:120},{title:this.formItemNm[13],field:"vitri",width:100},{title:this.formItemNm[14],width:150,field:"status",tdTemplate:this.availableFlag},{title:this.formItemNm[15],tdTemplate:this.operationTpl,width:200,fixed:!0,fixedDir:"right"}],total:0,loading:!1,pageSize:10,pageIndex:1}}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-datasc"]],viewQuery:function(i,a){if(1&i&&(t.CC$(bt,7),t.CC$(Gt,7)),2&i){let o;t.wto(o=t.Gqi())&&(a.operationTpl=o.first),t.wto(o=t.Gqi())&&(a.availableFlag=o.first)}},standalone:!0,features:[t.eg9,t.UHJ],decls:32,vars:47,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],[3,"menutIdEven"],["menuttree",""],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-form",""],[3,"nzFor"],["name","title","nz-input","","placeholder","Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 t\xecm ki\u1ebfm",3,"ngModel","ngModelChange"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[3,"btnTpl","tableTitle","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","changePageNum","changePageSize","selectedChange"],["operationTpl",""],["tableBtns",""],["availableFlag",""],["class","operate-text",4,"appAuth"],[1,"operate-text"],["nz-button","","nzGhost","","nzType","primary",3,"click"],["class","m-r-8","nz-button","","nzType","primary",3,"click",4,"appAuth"],["nz-button","","nzType","default",3,"click",4,"appAuth"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","delete"],["nzCheckedChildren","Cho ph\xe9p","nzUnCheckedChildren","V\xf4 hi\u1ec7u h\xf3a",3,"ngModel","nzControl","nzDisabled"]],template:function(i,a){if(1&i&&(t.wR5(0,"app-page-header",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-menu-tree",4,5),t.qCj("menutIdEven",function(r){return a.searchMenutDatasc(r)}),t.C$Y()(),t.I0R(6,"div",3)(7,"nz-card",6)(8,"form",7)(9,"div",2)(10,"div",3)(11,"nz-form-item")(12,"nz-form-label",8),t.OEk(13),t.C$Y(),t.I0R(14,"nz-form-control")(15,"input",9),t.iHE("ngModelChange",function(r){return t.kNx(a.searchParam.title1,r)||(a.searchParam.title1=r),r}),t.C$Y()()()(),t.wR5(16,"div",3),t.I0R(17,"div",10)(18,"button",11),t.qCj("click",function(){return a.getDataList()}),t.wR5(19,"i",12),t.OEk(20),t.C$Y(),t.I0R(21,"button",13),t.qCj("click",function(){return a.resetForm()}),t.wR5(22,"i",14),t.OEk(23),t.C$Y()()()()(),t.I0R(24,"app-card-table-wrap",15),t.qCj("reload",function(){return a.reloadTable()}),t.I0R(25,"app-ant-table",16),t.qCj("changePageNum",function(r){return a.getDataList(r)})("changePageSize",function(r){return a.changePageSize(r)})("selectedChange",function(r){return a.selectedChecked(r)}),t.C$Y(),t.yuY(26,Mt,2,2,"ng-template",null,17,t.gJz),t.C$Y(),t.yuY(28,Rt,2,2,"ng-template",null,18,t.gJz)(30,kt,1,3,"ng-template",null,19,t.gJz),t.C$Y()()()),2&i){const o=t.Gew(29);t.E7m("pageHeaderInfo",a.pageHeaderInfo),t.yG2(2),t.E7m("nzGutter",t.q4q(44,Ft)),t.yG2(),t.E7m("nzLg",6)("nzMd",24)("nzSm",24)("nzXl",6)("nzXs",24)("nzXXl",6),t.yG2(3),t.E7m("nzLg",18)("nzMd",24)("nzSm",24)("nzXl",18)("nzXs",24)("nzXXl",18),t.yG2(),t.E7m("nzBodyStyle",t.q4q(45,Lt)),t.yG2(2),t.E7m("nzGutter",t.q4q(46,Ot)),t.yG2(),t.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),t.yG2(3),t.cNF(a.formItemNm[4]),t.yG2(2),t.OKB("ngModel",a.searchParam.title1),t.yG2(),t.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),t.yG2(),t.E7m("nzLg",8)("nzMd",12)("nzSm",24)("nzXl",8)("nzXs",24)("nzXXl",8),t.yG2(),t.E7m("nzType","primary"),t.yG2(2),t.oRS(" ",a.formItemNm[5]," "),t.yG2(3),t.oRS(" ",a.formItemNm[6]," "),t.yG2(),t.E7m("btnTpl",o)("tableTitle",a.formItemNm[7]),t.yG2(),t.E7m("checkedCashArrayFromComment",a.checkedCashArray)("tableConfig",a.tableConfig)("tableData",a.dataList)}},dependencies:[C.EV,C.Ez,b.k,G.o9,G.gn,T.R,T.c,g.Ko,g.QD,g.ox,at,j.Q,A.Q,x.E,f.iq,f.Q9,c.y,c.sz,c.ot,c.ue,c.u,c._G,c.SC,m.WO,m.BN,m.qU,m.Qo,m.YZ,u.OA,u.cv,v.Wy,v.If,it.s,Y.O0],encapsulation:2,changeDetection:0})}return n})()}}]);