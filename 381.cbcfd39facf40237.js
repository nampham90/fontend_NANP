"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[381],{381:(lt,S,r)=>{r.r(S),r.d(S,{DemoComponent:()=>it});var P=r(8609),x=r(4895),g=r(4259);const f="DemoCreatePorduct",u="DemoUpdatePorduct",h="DemoDeletePorduct",T="DemoListProduct";var y=r(1135),t=r(2223),b=r(4553);const D=o=>({...o,editing:!1,synced:!0});let A=(()=>{class o{constructor(e){this.socketService=e,this.products=[],this.productStore$=new y.X([]),this.socketService.setupSocketConnection(),this.socketService.on(T,n=>{this.products=n.map(D),this.setProductStore(this.products)}),this.socketService.on(f,n=>{this.products.push(D(n)),this.setProductStore(this.products)}),this.socketService.on(u,n=>{const i=this.products.find(s=>s.id==n.id);i&&(i.proname=n.proname,i.price=n.price),console.log(this.products),this.setProductStore(this.products)}),this.socketService.on(h,n=>{const i=this.products.findIndex(s=>s.id===n);-1!==i&&this.products.splice(i,1),this.setProductStore(this.products)})}getWithCompleted(e){return this.products.filter(n=>n.completed=e)}allCompleted(){return this.products.length===this.getCompleted().length}getRemaining(){return this.getWithCompleted(!1)}getCompleted(){return this.getWithCompleted(!0)}setAllPro(e){this.products.forEach(n=>{n.completed=e,n.synced=!1,this.socketService.emit(u,n)})}removeCompleted(){this.getCompleted().forEach(e=>{this.socketService.emit(h,e.idpro)}),this.products=this.getRemaining()}toggleCompletion(e){e.completed=!e.completed,e.synced=!1,this.socketService.emit(u,e)}remove(e){this.products.splice(this.products.indexOf(e),1),this.socketService.emit(h,e.idpro)}add(e,n){this.socketService.emit(f,{proname:e,pirce:n,completed:!1})}setProductStore(e){this.productStore$.next(e)}getProductStore(){return this.productStore$.asObservable()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.$))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var F=r(5529),L=r(4178),Y=r(8746),k=r(5855),J=r(1655),U=r(2577),N=r(7920),I=r(9085),O=r(6706),Z=r(3272),X=r(4755),c=r(9401),G=r(4902),d=r(4701),z=r(1929),E=r(8397),v=r(9646),_=r(8551),Q=r(5216);function H(o,a){1&o&&(t.ynx(0),t.TgZ(1,"nz-form-item")(2,"nz-form-label",8),t._uU(3,"ID Product"),t.qZA(),t.TgZ(4,"nz-form-control",9),t._UZ(5,"input",10),t.qZA()(),t.BQk()),2&o&&(t.xp6(2),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24))}let B=(()=>{class o{constructor(e,n,i,s){this.modalRef=e,this.fb=n,this.vf=i,this.message=s,this.isEdit=(0,t.tdS)(!1)}getAsyncFnData(e){return(0,v.of)(e)}getCurrentValue(){return(0,G.r7)(this.addEditForm)?(0,v.of)(this.addEditForm.value):(0,v.of)(!1)}get f(){return this.addEditForm.controls}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&(this.isEdit.set(!0),this.addEditForm.patchValue(this.params))}initForm(){this.addEditForm=this.fb.group({idpro:[null,[c.kI.required]],proname:[null,[c.kI.required]],price:[null]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.Lf),t.Y36(c.qu),t.Y36(Q.m),t.Y36(Z.dD))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-subdemo"]],standalone:!0,features:[t.jDz],decls:12,vars:10,consts:[["nz-form","",3,"formGroup"],[4,"ngIf"],["nzRequired","","nzFor","proname",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp T\xean S\u1ea3n Ph\u1ea9m",3,"nzSm","nzXs"],["nz-input","","formControlName","proname","name","proname","placeholder","vd: iphone","id","proname"],["nzFor","price",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp gi\xe1",3,"nzSm","nzXs"],["nz-input","","formControlName","price","name","price","placeholder","Vui l\xf2ng nh\u1eadp ...","id","price"],["nzRequired","","nzFor","idpro",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ID Product",3,"nzSm","nzXs"],["nz-input","","formControlName","idpro","name","idpro","placeholder","Vui l\xf2ng nh\u1eadp ID Product","id","idpro"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.YNc(1,H,6,4,"ng-container",1),t.TgZ(2,"nz-form-item")(3,"nz-form-label",2),t._uU(4,"T\xean S\u1ea3n Ph\u1ea9m"),t.qZA(),t.TgZ(5,"nz-form-control",3),t._UZ(6,"input",4),t.qZA()(),t.TgZ(7,"nz-form-item")(8,"nz-form-label",5),t._uU(9,"Gi\xe1"),t.qZA(),t.TgZ(10,"nz-form-control",6),t._UZ(11,"input",7),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.addEditForm),t.xp6(1),t.Q6J("ngIf",!n.isEdit()),t.xp6(2),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24),t.xp6(3),t.Q6J("nzSm",4)("nzXs",24),t.xp6(2),t.Q6J("nzSm",18)("nzXs",24))},dependencies:[c.u5,c._Y,c.Fj,c.JJ,c.JL,d.U5,z.t3,z.SK,d.Lr,d.Nx,d.iK,d.Fd,c.UX,c.sg,c.u,z.Jb,E.o7,E.Zp,X.O5,g.sL],changeDetection:0}),o})();var W=r(7017);let M=(()=>{class o{constructor(e){this.modalWrapService=e}getContentComponent(){return B}show(e={},n){return this.modalWrapService.show(this.getContentComponent(),e,n)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(W.U))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=r(4471),V=r(2242),j=r(4247);const K=["operationTpl"],$=["priceTpl"],w=["pronameTpl"];function q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showVideo())}),t._UZ(1,"span",10),t._uU(2,"H\u01b0\u1edbng d\u1eabn "),t.qZA()}2&o&&t.Q6J("nzSize","large")}function tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"span",11)(1,"button",12),t.NdJ("click",function(){const i=t.CHM(e),s=i.id,p=i.idpro,l=i.proname,m=i.price,C=t.oxw();return t.KtG(C.edit(s,p,l,m))}),t._uU(2,"C\u1eadp nh\u1eadt"),t.qZA()(),t.TgZ(3,"span",11)(4,"button",12),t.NdJ("click",function(){const i=t.CHM(e),s=i.id,p=i.idpro,l=t.oxw();return t.KtG(l.del(s,p))}),t._uU(5,"X\xf3a"),t.qZA()()}}function et(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.price;t.xp6(1),t.Oqu(e)}}function nt(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=a.proname;t.xp6(1),t.Oqu(e)}}function ot(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.add())}),t._UZ(1,"i",14),t._uU(2," Th\xeam m\u1edbi "),t.qZA(),t.TgZ(3,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.allDel())}),t._UZ(4,"i",16),t._uU(5," X\xf3a t\u1ea5t c\u1ea3 "),t.qZA()}}let it=(()=>{class o extends P.k{constructor(e,n,i,s,p,l,m,C,rt,st,at,ct){super(e,n,i,s,p,l),this.cdr=e,this.spinService=n,this.dataService=i,this.youtubeModalService=s,this.router=p,this.menusService=l,this.message=m,this.productStore=C,this.socketService=rt,this.subdemoService=st,this.modalSrv=at,this.userInfoService=ct,this.dataList=[],this.checkedCashArray=[],this.visibleOptions=[]}ngOnInit(){super.ngOnInit(),this.initTable()}add(){this.subdemoService.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(e=>{!e||0===e.status||(this.tableLoading(!0),this.socketService.emit(f,e.modalValue),this.tableLoading(!1))},e=>this.tableLoading(!1))}edit(e,n,i,s){this.subdemoService.show({nzTitle:"C\u1eadp nh\u1eadt"},{id:e,idpro:n,proname:i,price:s}).subscribe(({modalValue:l,status:m})=>{0!==m&&(l.id=e,this.socketService.emit(u,l))})}del(e,n){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng ?",nzContent:"Nh\u1ea5n Ok \u0111\u1ec3 x\xe1c th\u1ef1c",nzOnOk:()=>{this.socketService.emit(h,e),this.getDataList()}})}allDel(){}getDataList(e){this.userInfoService.getUserInfo().subscribe(n=>{this.socketService.emit(T,n),this.tableLoading(!0),this.productStore.getProductStore().pipe((0,Y.x)(()=>{this.tableLoading(!1)}),(0,k.sL)(this.destroyRef)).subscribe(i=>{this.dataList=[...i],this.tableLoading(!1)})})}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}changePageSize(e){this.tableConfig.pageSize=e}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}selectedChecked(e){this.checkedCashArray=[...e]}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"STT",field:"idpro",width:180},{title:"Name",width:180,field:"proname",tdTemplate:this.pronameTpl},{title:"Price",width:120,field:"price",tdTemplate:this.priceTpl},{title:"Events",tdTemplate:this.operationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(J.a),t.Y36(U.x),t.Y36(N.p),t.Y36(I.F0),t.Y36(O.O),t.Y36(Z.dD),t.Y36(A),t.Y36(b.$),t.Y36(M),t.Y36(_.Sf),t.Y36(R.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-demo"]],viewQuery:function(e,n){if(1&e&&(t.Gf(K,7),t.Gf($,7),t.Gf(w,7)),2&e){let i;t.iGM(i=t.CRH())&&(n.operationTpl=i.first),t.iGM(i=t.CRH())&&(n.priceTpl=i.first),t.iGM(i=t.CRH())&&(n.pronameTpl=i.first)}},standalone:!0,features:[t._Bn([A]),t.qOj,t.jDz],decls:14,vars:6,consts:[[3,"pageHeaderInfo"],["huongdanTpl",""],[1,"normal-table-wrap"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["operationTpl",""],["priceTpl",""],["pronameTpl",""],["tableBtns",""],["nz-button","","nzType","primary","nzShape","round",3,"nzSize","click"],["nz-icon","","nzType","star","nzTheme","outline"],[1,"operate-text"],["nz-button","","nzGhost","","nzType","primary",3,"click"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","delete"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-page-header",0),t.YNc(1,q,3,1,"ng-template",null,1,t.W1O),t.TgZ(3,"div",2)(4,"app-card-table-wrap",3),t.NdJ("reload",function(){return n.reloadTable()}),t.TgZ(5,"app-ant-table",4),t.NdJ("selectedChange",function(s){return n.selectedChecked(s)})("changePageSize",function(s){return n.changePageSize(s)})("changePageNum",function(s){return n.getDataList(s)}),t.qZA(),t.YNc(6,tt,6,0,"ng-template",null,5,t.W1O),t.YNc(8,et,2,1,"ng-template",null,6,t.W1O),t.YNc(10,nt,2,1,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(12,ot,6,0,"ng-template",null,8,t.W1O),t.qZA()),2&e){const i=t.MAs(13);t.Q6J("pageHeaderInfo",n.pageHeaderInfo),t.xp6(4),t.Q6J("tableTitle","Danh sach Product")("btnTpl",i),t.xp6(1),t.Q6J("checkedCashArrayFromComment",n.checkedCashArray)("tableConfig",n.tableConfig)("tableData",n.dataList)}},dependencies:[x.q,g.sL,g.ix,V.w,j.dQ,F.q,L.p],changeDetection:0}),o})()}}]);