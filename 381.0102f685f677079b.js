"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[381],{381:(ce,C,a)=>{a.r(C),a.d(C,{DemoComponent:()=>ie});var x=a(8609),E=a(4895),h=a(4259);const v="DemoCreatePorduct",T="DemoDeletePorduct",b="DemoListProduct";var P=a(1135),e=a(2223),D=a(4553),g=a(8551);let A=(()=>{class n{constructor(t,i){this.socketService=t,this.modalSrv=i,this.products=[],this.productStore$=new P.X({pageNum:1,pageSize:10,total:0,list:[]}),this.socketService.setupSocketConnection(),this.socketService.on(b,o=>{o.code>0?this.modalSrv.error({nzTitle:o.msg}):this.setProductStore(o.data)})}update(t){this.socketService.emit("DemoUpdatePorduct",t)}remove(t){this.products.splice(this.products.indexOf(t),1),this.socketService.emit(T,t.idpro)}add(t,i){this.socketService.emit(v,{proname:t,pirce:i,completed:!1})}setProductStore(t){this.productStore$.next(t)}getProductStore(){return this.productStore$.asObservable()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(D.$),e.LFG(g.Sf))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var F=a(5529),y=a(4178),L=a(8746),N=a(5855),U=a(1655),Y=a(2577),J=a(7920),O=a(9085),k=a(6706),Z=a(3272),G=a(4755),c=a(9401),X=a(4902),d=a(4701),f=a(1929),_=a(8397),z=a(9646),Q=a(5216);function H(n,s){1&n&&(e.ynx(0),e.TgZ(1,"nz-form-item")(2,"nz-form-label",8),e._uU(3,"ID Product"),e.qZA(),e.TgZ(4,"nz-form-control",9),e._UZ(5,"input",10),e.qZA()(),e.BQk()),2&n&&(e.xp6(2),e.Q6J("nzSm",4)("nzXs",24),e.xp6(2),e.Q6J("nzSm",18)("nzXs",24))}let B=(()=>{class n{constructor(t,i,o,r){this.modalRef=t,this.fb=i,this.vf=o,this.message=r,this.isEdit=(0,e.tdS)(!1)}getAsyncFnData(t){return(0,z.of)(t)}getCurrentValue(){return(0,X.r7)(this.addEditForm)?(0,z.of)(this.addEditForm.value):(0,z.of)(!1)}get f(){return this.addEditForm.controls}ngOnInit(){this.initForm(),Object.keys(this.params).length>0&&(this.isEdit.set(!0),this.addEditForm.patchValue(this.params))}initForm(){this.addEditForm=this.fb.group({idpro:[null,[c.kI.required]],proname:[null,[c.kI.required]],price:[null]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.Lf),e.Y36(c.qu),e.Y36(Q.m),e.Y36(Z.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-subdemo"]],standalone:!0,features:[e.jDz],decls:12,vars:10,consts:[["nz-form","",3,"formGroup"],[4,"ngIf"],["nzRequired","","nzFor","proname",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp T\xean S\u1ea3n Ph\u1ea9m",3,"nzSm","nzXs"],["nz-input","","formControlName","proname","name","proname","placeholder","vd: iphone","id","proname"],["nzFor","price",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp gi\xe1",3,"nzSm","nzXs"],["nz-input","","formControlName","price","name","price","placeholder","Vui l\xf2ng nh\u1eadp ...","id","price"],["nzRequired","","nzFor","idpro",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ID Product",3,"nzSm","nzXs"],["nz-input","","formControlName","idpro","name","idpro","placeholder","Vui l\xf2ng nh\u1eadp ID Product","id","idpro"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,H,6,4,"ng-container",1),e.TgZ(2,"nz-form-item")(3,"nz-form-label",2),e._uU(4,"T\xean S\u1ea3n Ph\u1ea9m"),e.qZA(),e.TgZ(5,"nz-form-control",3),e._UZ(6,"input",4),e.qZA()(),e.TgZ(7,"nz-form-item")(8,"nz-form-label",5),e._uU(9,"Gi\xe1"),e.qZA(),e.TgZ(10,"nz-form-control",6),e._UZ(11,"input",7),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.addEditForm),e.xp6(1),e.Q6J("ngIf",!i.isEdit()),e.xp6(2),e.Q6J("nzSm",4)("nzXs",24),e.xp6(2),e.Q6J("nzSm",18)("nzXs",24),e.xp6(3),e.Q6J("nzSm",4)("nzXs",24),e.xp6(2),e.Q6J("nzSm",18)("nzXs",24))},dependencies:[c.u5,c._Y,c.Fj,c.JJ,c.JL,d.U5,f.t3,f.SK,d.Lr,d.Nx,d.iK,d.Fd,c.UX,c.sg,c.u,f.Jb,_.o7,_.Zp,G.O5,h.sL],changeDetection:0}),n})();var M=a(7017);let V=(()=>{class n{constructor(t){this.modalWrapService=t}getContentComponent(){return B}show(t={},i){return this.modalWrapService.show(this.getContentComponent(),t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.U))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=a(4471),K=a(2242),R=a(4247);const W=["operationTpl"],$=["priceTpl"],w=["pronameTpl"];function q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showVideo())}),e._UZ(1,"span",10),e._uU(2,"H\u01b0\u1edbng d\u1eabn "),e.qZA()}2&n&&e.Q6J("nzSize","large")}function ee(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"span",11)(1,"button",12),e.NdJ("click",function(){const o=e.CHM(t),r=o.id,p=o.idpro,l=o.proname,m=o.price,u=e.oxw();return e.KtG(u.edit(r,p,l,m))}),e._uU(2,"C\u1eadp nh\u1eadt"),e.qZA()(),e.TgZ(3,"span",11)(4,"button",12),e.NdJ("click",function(){const o=e.CHM(t),r=o.id,p=o.idpro,l=e.oxw();return e.KtG(l.del(r,p))}),e._uU(5,"X\xf3a"),e.qZA()()}}function te(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.price;e.xp6(1),e.Oqu(t)}}function ne(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.proname;e.xp6(1),e.Oqu(t)}}function oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.add())}),e._UZ(1,"i",14),e._uU(2," Th\xeam m\u1edbi "),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.allDel())}),e._UZ(4,"i",16),e._uU(5," X\xf3a t\u1ea5t c\u1ea3 "),e.qZA()}}let ie=(()=>{class n extends x.k{constructor(t,i,o,r,p,l,m,u,S,ae,re,se){super(t,i,o,r,p,l),this.cdr=t,this.spinService=i,this.dataService=o,this.youtubeModalService=r,this.router=p,this.menusService=l,this.message=m,this.productStore=u,this.socketService=S,this.subdemoService=ae,this.modalSrv=re,this.userInfoService=se,this.dataList=[],this.checkedCashArray=[],this.visibleOptions=[],this.searchParam={}}ngOnInit(){super.ngOnInit(),this.initTable()}add(){this.subdemoService.show({nzTitle:"Th\xeam m\u1edbi"}).subscribe(t=>{!t||0===t.status||(this.tableLoading(!0),this.userInfoService.getUserInfo().subscribe(i=>{this.socketService.emit(v,{pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,filters:this.searchParam,userInfo:i,data:t.modalValue}),this.tableLoading(!1)}))},t=>this.tableLoading(!1))}edit(t,i,o,r){this.subdemoService.show({nzTitle:"C\u1eadp nh\u1eadt"},{id:t,idpro:i,proname:o,price:r}).subscribe(({modalValue:l,status:m})=>{0!==m&&(l.id=t,this.userInfoService.getUserInfo().subscribe(u=>{this.productStore.update({pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,filters:this.searchParam,userInfo:u,data:l}),this.tableLoading(!1)}))})}del(t,i){this.modalSrv.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng ?",nzContent:"Nh\u1ea5n Ok \u0111\u1ec3 x\xe1c th\u1ef1c",nzOnOk:()=>{this.tableLoading(!0),this.userInfoService.getUserInfo().subscribe(o=>{this.socketService.emit(T,{pageSize:this.tableConfig.pageSize,pageNum:this.tableConfig.pageIndex,filters:this.searchParam,userInfo:o,data:t}),this.tableLoading(!1)})}})}allDel(){}getDataList(t){this.userInfoService.getUserInfo().subscribe(i=>{this.socketService.emit(b,{pageSize:this.tableConfig.pageSize,pageNum:t?.pageIndex||this.tableConfig.pageIndex,filters:this.searchParam,userInfo:i}),this.tableLoading(!0),this.productStore.getProductStore().pipe((0,L.x)(()=>{this.tableLoading(!1)}),(0,N.sL)(this.destroyRef)).subscribe(r=>{const{list:p,total:l,pageNum:m}=r;this.dataList=[...p],this.tableConfig.total=l,this.tableConfig.pageIndex=m,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})})}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(t){this.tableConfig.loading=t,this.tableChangeDectction()}changePageSize(t){this.tableConfig.pageSize=t}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}selectedChecked(t){this.checkedCashArray=[...t]}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"STT",field:"idpro",width:180},{title:"Name",width:180,field:"proname",tdTemplate:this.pronameTpl},{title:"Price",width:120,field:"price",tdTemplate:this.priceTpl},{title:"Events",tdTemplate:this.operationTpl,width:250,fixed:!0,fixedDir:"right"}],total:0,loading:!0,pageSize:10,pageIndex:1}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(U.a),e.Y36(Y.x),e.Y36(J.p),e.Y36(O.F0),e.Y36(k.O),e.Y36(Z.dD),e.Y36(A),e.Y36(D.$),e.Y36(V),e.Y36(g.Sf),e.Y36(j.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-demo"]],viewQuery:function(t,i){if(1&t&&(e.Gf(W,7),e.Gf($,7),e.Gf(w,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.operationTpl=o.first),e.iGM(o=e.CRH())&&(i.priceTpl=o.first),e.iGM(o=e.CRH())&&(i.pronameTpl=o.first)}},standalone:!0,features:[e._Bn([A]),e.qOj,e.jDz],decls:14,vars:6,consts:[[3,"pageHeaderInfo"],["huongdanTpl",""],[1,"normal-table-wrap"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["operationTpl",""],["priceTpl",""],["pronameTpl",""],["tableBtns",""],["nz-button","","nzType","primary","nzShape","round",3,"nzSize","click"],["nz-icon","","nzType","star","nzTheme","outline"],[1,"operate-text"],["nz-button","","nzGhost","","nzType","primary",3,"click"],["nz-button","","nzType","primary",1,"m-r-8",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","delete"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-page-header",0),e.YNc(1,q,3,1,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2)(4,"app-card-table-wrap",3),e.NdJ("reload",function(){return i.reloadTable()}),e.TgZ(5,"app-ant-table",4),e.NdJ("selectedChange",function(r){return i.selectedChecked(r)})("changePageSize",function(r){return i.changePageSize(r)})("changePageNum",function(r){return i.getDataList(r)}),e.qZA(),e.YNc(6,ee,6,0,"ng-template",null,5,e.W1O),e.YNc(8,te,2,1,"ng-template",null,6,e.W1O),e.YNc(10,ne,2,1,"ng-template",null,7,e.W1O),e.qZA(),e.YNc(12,oe,6,0,"ng-template",null,8,e.W1O),e.qZA()),2&t){const o=e.MAs(13);e.Q6J("pageHeaderInfo",i.pageHeaderInfo),e.xp6(4),e.Q6J("tableTitle","Danh sach Product")("btnTpl",o),e.xp6(1),e.Q6J("checkedCashArrayFromComment",i.checkedCashArray)("tableConfig",i.tableConfig)("tableData",i.dataList)}},dependencies:[E.q,h.sL,h.ix,K.w,R.dQ,F.q,y.p],changeDetection:0}),n})()}}]);