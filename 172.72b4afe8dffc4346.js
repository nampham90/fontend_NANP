"use strict";(self.webpackChunkng_ant_admin=self.webpackChunkng_ant_admin||[]).push([[172],{172:(mn,f,l)=>{l.r(f),l.d(f,{Spin00201Component:()=>dn});var n=l(4496),O=l(6844),N=l(5072),S=l(5128),h=l(2532),T=l(6088),u=l(2605),c=l(268),d=l(1752),p=l(6504),E=l(460),D=l(3652),L=l(2624),P=l(472),y=l(7436),G=l(9072),k=l(9432),_=l(1188),b=l(9640),I=l(4656),g=l(4872),R=l(2300),C=l(7592),z=l(1368),A=l(592);let X=(()=>{class a{findConditon(e){return this.http.post(C.OG,e,{needSuccessInfo:!1})}constructor(){this.http=(0,n.uUt)(A.k)}static#n=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275prov=n.wxM({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var V=l(8824),M=l(3828),v=function(a){return a.Demo="/default/dashboard/demo",a.Analysis="/default/dashboard/analysis",a.Monitor="/default/dashboard/monitor",a.Workbench="/default/dashboard/workbench",a.SPIN00101="/default/in/spin00101",a.SPIN00201="/default/in/spin00201",a.SPIN00501="/default/in/spin00501",a.SPIN00601="/default/in/spin00601",a.SPIN00801="/default/in/spin00801",a}(v||{}),Y=l(9440),B=l(3064),F=l(5584);const $=["kiemdinhTpl"],K=["siplnnoTpl"],U=["spplyTpl"],H=["userTpl"],j=["divkbnTpl"],J=["endDatePicker"];function Q(a,r){if(1&a){const e=n.KQA();n.I0R(0,"button",30),n.qCj("click",function(){n.usT(e);const t=n.GaO();return n.CGJ(t.resultSupply())}),n.wR5(1,"span",19),n.C$Y()}}function w(a,r){if(1&a&&n.wR5(0,"nz-option",31),2&a){const e=r.$implicit;n.E7m("nzLabel",e.DIVNM)("nzValue",e.DIVKBN)}}function q(a,r){if(1&a){const e=n.KQA();n.I0R(0,"button",30),n.qCj("click",function(){const o=n.usT(e).SIPLNNO,i=n.GaO();return n.CGJ(i.kiemdinh(o))}),n.OEk(1,"Ki\u1ec3m h\xe0ng"),n.C$Y()}}function W(a,r){if(1&a&&(n.I0R(0,"div",32)(1,"div",33)(2,"a",34),n.OEk(3),n.C$Y()(),n.I0R(4,"div",33)(5,"button",35),n.wR5(6,"span",36),n.C$Y()()()),2&a){const e=r.SIPLNNO,s=n.GaO();n.yG2(3),n.cNF(e),n.yG2(2),n.E7m("cdkCopyToClipboard",s.copySiplnno(e))}}function Z(a,r){1&a&&n.OEk(0),2&a&&n.oRS(" ",r.supplier.name," ")}function x(a,r){1&a&&n.OEk(0),2&a&&n.cNF(r.employe.name)}function nn(a,r){1&a&&(n.I0R(0,"span"),n.OEk(1," Ti\u1ec1n m\u1eb7t"),n.C$Y())}function en(a,r){1&a&&(n.I0R(0,"span"),n.OEk(1," Tr\u1ea3 sau"),n.C$Y())}function tn(a,r){1&a&&n.yuY(0,nn,2,0,"span")(1,en,2,0),2&a&&n.C0Y(0,"01"==r.DIVKBN?0:1)}function an(a,r){}const on=()=>({"padding-bottom":0}),m=()=>({xs:8,sm:16,md:24}),ln=()=>["bgdisable"],sn=()=>["styleName"],rn=()=>[16,16];let dn=(()=>{class a extends O.G{constructor(){super(...arguments),this.cdr=(0,n.uUt)(n.kD9),this.router=(0,n.uUt)(G.E5),this.message=(0,n.uUt)(k.yo),this.tmt280Service=(0,n.uUt)(I.K),this.resultUserService=(0,n.uUt)(R.C),this.spin00201Service=(0,n.uUt)(X),this.datePipe=(0,n.uUt)(z.y),this.tin050Service=(0,n.uUt)(Y.S),this.searchParam={},this.ActionCode=P.i,this.dataList=[],this.checkedCashArray=[],this.visibleOptions=[],this.divkbns=(0,n.OCB)([]),this.phongban_id=(0,n.OCB)(0),this.siplnno="",this.startValue=null,this.endValue=null,this.disabledStartDate=e=>!(!e||!this.endValue)&&e.getTime()>this.endValue.getTime(),this.disabledEndDate=e=>!(!e||!this.startValue)&&e.getTime()<=this.startValue.getTime(),this.sts=[{label:"\u0110\u0103ng k\xfd",value:0,checked:!1},{label:"Ho\xe0ng th\xe0nh nh\u1eadp h\xe0ng",value:1,checked:!1},{label:"Th\u1ef1c t\u1ebf nh\u1eadp h\xe0ng",value:2,checked:!1}],this.userDetail=(0,n.OCB)({CSTMCD:"",CSTNAME:"",CSTMOBILE:"",CSTADDRESS:"",CSTEMAIL:""})}handleStartOpenChange(e){e||this.endDatePicker.open()}handleEndOpenChange(e){}changeSts(){if(this.sts.every(e=>!e.checked))delete this.searchParam.STS;else{let e={ARVLCOMPFLG:"",SICOMPFLG:"",RSLTSENDFLG:""};for(let s of this.sts)0===s.value&&(e.ARVLCOMPFLG=!0===s.checked?"1":"0"),1===s.value&&(e.SICOMPFLG=!0===s.checked?"1":"0"),2===s.value&&(e.RSLTSENDFLG=!0===s.checked?"1":"0");this.searchParam.STS=e}}ngOnInit(){super.ngOnInit(),this.initTable(),this.apiGetListDivkbn(),this.visibleOptions=[...y.e.transformMapToArray(y.c.visible,2)]}kiemdinh(e){let s=this.dataList.find(t=>t.SIPLNNO===e);this.tin050Service.mergeHedTin020ToTin050(s),this.router.navigateByUrl(v.SPIN00501)}copySiplnno(e){return`${e}`}apiGetListDivkbn(){this.tmt280Service.getListDivKbn().pipe((0,g.ay)(this.destroyRef)).subscribe(e=>{this.divkbns.set(e)})}resultSupply(){this.resultUserService.show({nzTitle:C.UF,nzWidth:1424},{showcomfirm:!1,department:C.UF}).pipe((0,g.ay)(this.destroyRef)).subscribe(e=>{!e||0===e.status||(this.phongban_id.set(e.modalValue.phongban_id),this.userDetail.set({CSTMCD:e.modalValue.id,CSTNAME:e.modalValue.name,CSTMOBILE:"0"+e.modalValue.dienthoai,CSTADDRESS:(null==e.modalValue.BUYERADRS1ENC?"":e.modalValue.BUYERADRS1ENC)+" "+(null==e.modalValue.BUYERADRS2ENC?"":e.modalValue.BUYERADRS2ENC)+" "+(null==e.modalValue.BUYERADRS3ENC?"":e.modalValue.BUYERADRS3ENC),CSTEMAIL:e.modalValue.email}),this.searchParam.SPPLYCD=Number(this.userDetail().CSTMCD))})}getDataList(e){this.startValue?this.searchParam.fromDate=this.datePipe.transform(this.startValue,"yyyy/MM/dd")+"":delete this.searchParam.fromDate,this.endValue?this.searchParam.toDate=this.datePipe.transform(this.startValue,"yyyy/MM/dd")+"":delete this.searchParam.toDate,""===this.searchParam.SIPLNNO&&delete this.searchParam.SIPLNNO,this.tableLoading(!0),this.spin00201Service.findConditon({pageSize:this.tableConfig.pageSize,pageNum:e?.pageIndex||1,filters:this.searchParam}).pipe((0,V.U)(()=>{this.tableLoading(!1)}),(0,g.ay)(this.destroyRef)).subscribe(t=>{const{list:o,total:i,pageNum:pn}=t;this.dataList=[...o],this.tableConfig.total=i,this.tableConfig.pageIndex=pn,this.tableLoading(!1),this.checkedCashArray=[...this.checkedCashArray]})}tableChangeDectction(){this.dataList=[...this.dataList],this.cdr.detectChanges()}tableLoading(e){this.tableConfig.loading=e,this.tableChangeDectction()}selectedChecked(e){this.checkedCashArray=[...e]}changePageSize(e){this.tableConfig.pageSize=e}resetForm(){this.searchParam={},this.userDetail.set({CSTMCD:"",CSTNAME:"",CSTMOBILE:"",CSTADDRESS:"",CSTEMAIL:""}),this.getDataList()}reloadTable(){this.message.info("\u0110\xe3 \u0111\u01b0\u1ee3c l\xe0m m\u1edbi"),this.getDataList()}initTable(){this.tableConfig={showCheckbox:!1,headers:[{title:"Ki\u1ec3m h\xe0ng",field:"id",width:120,tdTemplate:this.kiemdinhTpl},{title:"Ng\xe0y nh\u1eadp",field:"ARVLPLNDATE",width:120,pipe:"date:yyyy-MM-dd"},{title:"S\u1ed1 h\xf3a \u0111\u01a1n",field:"SIPLNNO",width:150,tdTemplate:this.siplnnoTpl},{title:"Tr\u1ea1ng th\xe1i",field:"STSNM",width:100},{title:"Nh\xe0 cung c\xe2p",field:"SPPLYNM",width:120,tdTemplate:this.spplyTpl},{title:"Ng\u01b0\u1eddi nh\u1eadp",field:"USERCD",width:120,tdTemplate:this.userTpl},{title:"PT Thanh to\xe1n",field:"DIVNM",width:120,tdTemplate:this.divkbnTpl}],total:0,loading:!0,pageSize:10,pageIndex:1}}static#n=this.\u0275fac=(()=>{let e;return function(t){return(e||(e=n.otF(a)))(t||a)}})();static#e=this.\u0275cmp=n.In1({type:a,selectors:[["app-spin00201"]],viewQuery:function(s,t){if(1&s&&(n.CC$($,7),n.CC$(K,7),n.CC$(U,7),n.CC$(H,7),n.CC$(j,7),n.CC$(J,5)),2&s){let o;n.wto(o=n.Gqi())&&(t.kiemdinhTpl=o.first),n.wto(o=n.Gqi())&&(t.siplnnoTpl=o.first),n.wto(o=n.Gqi())&&(t.spplyTpl=o.first),n.wto(o=n.Gqi())&&(t.userTpl=o.first),n.wto(o=n.Gqi())&&(t.divkbnTpl=o.first),n.wto(o=n.Gqi())&&(t.endDatePicker=o.first)}},standalone:!0,features:[n.M5G([z.y]),n.eg9,n.UHJ],decls:75,vars:89,consts:[[3,"pageHeaderInfo"],[1,"normal-table-wrap"],["nzHoverable","",1,"m-b-10",3,"nzBodyStyle"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],[3,"nzFor"],[3,"nzErrorTip"],["nzFormat","yyyy-MM-dd","nzPlaceHolder","T\u1eeb ng\xe0y",3,"nzDisabledDate","ngModel","ngModelChange","nzOnOpenChange"],["nzFormat","yyyy-MM-dd","nzPlaceHolder","\u0110\u1ebfn ng\xe0y",3,"nzDisabledDate","ngModel","ngModelChange","nzOnOpenChange"],["endDatePicker",""],["name","siplnno","id","siplnno","nz-input","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["nzSearch","",3,"nzAddOnAfter"],["name","SPPLYCD","id","SPPLYCD","type","text","nz-input","",3,"ngModel","readOnly","ngClass","ngModelChange"],["suffixIconButton",""],[3,"ngClass"],["name","divkbn","id","divkbn",3,"ngModel","ngModelChange"],["nz-col","",1,"text-right","p-0","m-b-10",3,"nzLg","nzMd","nzSm","nzXl","nzXs","nzXXl"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","search"],["nz-button","",1,"m-l-15",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","outline"],[3,"tableTitle","btnTpl","reload"],[3,"checkedCashArrayFromComment","tableConfig","tableData","selectedChange","changePageSize","changePageNum"],["kiemdinhTpl",""],["siplnnoTpl",""],["spplyTpl",""],["userTpl",""],["divkbnTpl",""],["tableBtns",""],["nz-button","","nzType","primary",3,"click"],[3,"nzLabel","nzValue"],["nz-row",""],["nz-col",""],["nz-button","","nzType","link"],["nz-button","","nzType","default","nzShape","circle",3,"cdkCopyToClipboard"],["nz-icon","","nzType","copy"]],template:function(s,t){if(1&s&&(n.wR5(0,"app-page-header",0),n.I0R(1,"div",1)(2,"nz-card",2)(3,"div",3)(4,"div",4)(5,"nz-form-item")(6,"nz-form-label",5),n.OEk(7,"T\u1eeb ng\xe0y(From)"),n.C$Y(),n.I0R(8,"nz-form-control",6)(9,"nz-date-picker",7),n.iHE("ngModelChange",function(i){return n.kNx(t.startValue,i)||(t.startValue=i),i}),n.qCj("nzOnOpenChange",function(i){return t.handleStartOpenChange(i)}),n.C$Y()()()(),n.I0R(10,"div",4)(11,"nz-form-item")(12,"nz-form-label",5),n.OEk(13,"\u0110\u1ebfn ng\xe0y(To)"),n.C$Y(),n.I0R(14,"nz-form-control",6)(15,"nz-date-picker",8,9),n.iHE("ngModelChange",function(i){return n.kNx(t.endValue,i)||(t.endValue=i),i}),n.qCj("nzOnOpenChange",function(i){return t.handleEndOpenChange(i)}),n.C$Y()()()()(),n.I0R(17,"div",3)(18,"div",4)(19,"nz-form-item")(20,"nz-form-label",5),n.OEk(21,"S\u1ed1 h\xf3a \u0111\u01a1n"),n.C$Y(),n.I0R(22,"nz-form-control",6)(23,"input",10),n.iHE("ngModelChange",function(i){return n.kNx(t.searchParam.SIPLNNO,i)||(t.searchParam.SIPLNNO=i),i}),n.C$Y()()()(),n.I0R(24,"div",4)(25,"nz-form-item")(26,"nz-form-label",5),n.OEk(27,"Tr\u1ea1ng th\xe1i"),n.C$Y(),n.I0R(28,"nz-form-control",6)(29,"nz-checkbox-group",11),n.iHE("ngModelChange",function(i){return n.kNx(t.sts,i)||(t.sts=i),i}),n.qCj("ngModelChange",function(){return t.changeSts()}),n.C$Y()()()()(),n.I0R(30,"div",3)(31,"div",4)(32,"nz-form-item")(33,"nz-form-label",5),n.OEk(34,"Nh\xe0 cung c\u1ea5p"),n.C$Y(),n.I0R(35,"nz-form-control",6)(36,"nz-input-group",12)(37,"input",13),n.iHE("ngModelChange",function(i){return n.kNx(t.userDetail().CSTMCD,i)||(t.userDetail().CSTMCD=i),i}),n.C$Y()(),n.yuY(38,Q,2,0,"ng-template",null,14,n.gJz),n.C$Y()()(),n.I0R(40,"div",4)(41,"span",15),n.OEk(42),n.C$Y()()(),n.I0R(43,"div",3)(44,"div",4)(45,"nz-form-item")(46,"nz-form-label",5),n.OEk(47,"PT thanh to\xe1n"),n.C$Y(),n.I0R(48,"nz-form-control",6)(49,"nz-select",16),n.iHE("ngModelChange",function(i){return n.kNx(t.searchParam.DIVKBN,i)||(t.searchParam.DIVKBN=i),i}),n.c53(50,w,1,2,"nz-option",31,n.oxv),n.C$Y()()()(),n.wR5(52,"div",4),n.C$Y(),n.I0R(53,"div",3)(54,"div",17)(55,"button",18),n.qCj("click",function(){return t.getDataList()}),n.wR5(56,"i",19),n.OEk(57," T\xecm ki\u1ebfm "),n.C$Y(),n.I0R(58,"button",20),n.qCj("click",function(){return t.resetForm()}),n.wR5(59,"i",21),n.OEk(60,"Reset"),n.C$Y()()()(),n.I0R(61,"app-card-table-wrap",22),n.qCj("reload",function(){return t.reloadTable()}),n.I0R(62,"app-ant-table",23),n.qCj("selectedChange",function(i){return t.selectedChecked(i)})("changePageSize",function(i){return t.changePageSize(i)})("changePageNum",function(i){return t.getDataList(i)}),n.C$Y(),n.yuY(63,q,2,0,"ng-template",null,24,n.gJz)(65,W,7,2,"ng-template",null,25,n.gJz)(67,Z,1,1,"ng-template",null,26,n.gJz)(69,x,1,1,"ng-template",null,27,n.gJz)(71,tn,2,1,"ng-template",null,28,n.gJz),n.C$Y(),n.yuY(73,an,0,0,"ng-template",null,29,n.gJz),n.C$Y()),2&s){const o=n.Gew(39),i=n.Gew(74);n.E7m("pageHeaderInfo",t.pageHeaderInfo),n.yG2(2),n.E7m("nzBodyStyle",n.q4q(81,on)),n.yG2(),n.E7m("nzGutter",n.q4q(82,m)),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(5),n.E7m("nzDisabledDate",t.disabledStartDate),n.OKB("ngModel",t.startValue),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(5),n.E7m("nzDisabledDate",t.disabledEndDate),n.OKB("ngModel",t.endValue),n.yG2(2),n.E7m("nzGutter",n.q4q(83,m)),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(5),n.OKB("ngModel",t.searchParam.SIPLNNO),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(5),n.OKB("ngModel",t.sts),n.yG2(),n.E7m("nzGutter",n.q4q(84,m)),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(4),n.E7m("nzErrorTip","Vui l\xf2ng ch\u1ecdn nh\xe0 cung c\u1ea5p"),n.yG2(),n.E7m("nzAddOnAfter",o),n.yG2(),n.OKB("ngModel",t.userDetail().CSTMCD),n.E7m("readOnly",!0)("ngClass",n.q4q(85,ln)),n.yG2(3),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(),n.E7m("ngClass",n.q4q(86,sn)),n.yG2(),n.cNF(t.userDetail().CSTNAME),n.yG2(),n.E7m("nzGutter",n.q4q(87,m)),n.yG2(),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(5),n.OKB("ngModel",t.searchParam.DIVKBN),n.yG2(),n.oho(t.divkbns()),n.yG2(2),n.E7m("nzLg",12)("nzMd",12)("nzSm",24)("nzXl",12)("nzXs",24)("nzXXl",12),n.yG2(),n.E7m("nzGutter",n.q4q(88,rn)),n.yG2(),n.E7m("nzLg",24)("nzMd",24)("nzSm",24)("nzXl",24)("nzXs",24)("nzXXl",24),n.yG2(),n.E7m("nzType","primary"),n.yG2(6),n.E7m("tableTitle","Danh s\xe1ch S\u1ea3n ph\u1ea9m")("btnTpl",i),n.yG2(),n.E7m("checkedCashArrayFromComment",t.checkedCashArray)("tableConfig",t.tableConfig)("tableData",t.dataList)}},dependencies:[N.Q,S.iq,S.Q9,h.Ko,h.QD,h.ox,T.Wy,T.If,u.OA,u.cv,u.qG,c.VL,c.eE,c.Mh,d.WO,d.qU,d.Qo,d.YZ,p.y,p.ot,p.ue,p._G,E.EV,E.Ez,B.k,F.o9,D.Q,L.E,_.fO,_.iO,b.UN,b.ie,z.QF,M.oz,M.q6],styles:[".styleName[_ngcontent-%COMP%]{font-weight:700;text-decoration-line:underline}"]})}return a})()}}]);